<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>YarnSpinner: YarnSpinner/Parser.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="YarnSpinnerLogo-small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">YarnSpinner
   </div>
   <div id="projectbrief">YarnSpinner is an interpreter for the Yarn language, written in C#.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00301_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Parser.cs</div>  </div>
</div><!--header-->
<div class="contents">
<a href="a00301.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">The MIT License (MIT)</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">Copyright (c) 2015-2017 Secret Lab Pty. Ltd. and Yarn Spinner contributors.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">Permission is hereby granted, free of charge, to any person obtaining a copy</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">of this software and associated documentation files (the &quot;Software&quot;), to deal</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">in the Software without restriction, including without limitation the rights</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">copies of the Software, and to permit persons to whom the Software is</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">furnished to do so, subject to the following conditions:</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">The above copyright notice and this permission notice shall be included in all</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">copies or substantial portions of the Software.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">SOFTWARE.</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">using</span> System;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">using</span> System.Collections;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="keyword">using</span> System.Collections.Generic;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">using</span> System.Runtime.Serialization;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">using</span> System.Text;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">namespace </span>Yarn {</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="comment">// Magic abstract syntax tree producer - feed it tokens, and it gives you</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="comment">// a tree representation! Or an error!</span></div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="a00143.html">   37</a></span>&#160;    <span class="keyword">internal</span> <span class="keyword">class </span><a class="code" href="a00143.html">Parser</a> {</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        <span class="comment">// Indents the &#39;input&#39; string &#39;indentLevel&#39; times</span></div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">   40</a></span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">string</span> <a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a>(<span class="keywordtype">int</span> indentLevel, <span class="keywordtype">string</span> input, <span class="keywordtype">bool</span> newLine = <span class="keyword">true</span>) {</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;            var sb = <span class="keyword">new</span> StringBuilder();</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; indentLevel; i++) {</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                sb.Append (<span class="stringliteral">&quot;| &quot;</span>);</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;            }</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;            sb.Append (input);</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;            <span class="keywordflow">if</span> (newLine)</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                sb.Append (<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;            <span class="keywordflow">return</span> sb.ToString ();</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        }</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">        #region Parse Nodes</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor"></span>        <span class="comment">// Base class for nodes in th parse tree</span></div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="a00142.html">   56</a></span>&#160;        <span class="keyword">internal</span> <span class="keyword">abstract</span> <span class="keyword">class </span><a class="code" href="a00142.html">ParseNode</a> {</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="a00142.html#af313a82103fcc2ff5a177dbb06b92f7b">   58</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00142.html">ParseNode</a> <a class="code" href="a00142.html#af313a82103fcc2ff5a177dbb06b92f7b">parent</a>;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            <span class="comment">// The line that this parse node begins on.</span></div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="a00142.html#a18b493382de0fde5b4299c1bd2250075">   61</a></span>&#160;            <span class="keyword">internal</span> <span class="keywordtype">int</span> <a class="code" href="a00142.html#a18b493382de0fde5b4299c1bd2250075">lineNumber</a>;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;            <span class="comment">// ParseNodes do their parsing by consuming tokens from the Parser.</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            <span class="comment">// You parse tokens into a ParseNode by using its constructor.</span></div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="a00142.html#a9e7e90bbaed268529230512e4b5a2f77">   65</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00142.html#a9e7e90bbaed268529230512e4b5a2f77">ParseNode</a>(<a class="code" href="a00142.html">ParseNode</a> <a class="code" href="a00142.html#af313a82103fcc2ff5a177dbb06b92f7b">parent</a>, <a class="code" href="a00143.html">Parser</a> p) {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                this.parent = <a class="code" href="a00142.html#af313a82103fcc2ff5a177dbb06b92f7b">parent</a>;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                <span class="keywordflow">if</span> (p.<a class="code" href="a00143.html#a1a4de646937057988b59d2ff8035eae3">tokens</a>.Count &gt; 0)</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                    this.lineNumber = p.tokens.Peek().<a class="code" href="a00142.html#a18b493382de0fde5b4299c1bd2250075">lineNumber</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                    this.lineNumber = -1;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            }</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            <span class="comment">// Recursively prints the ParseNode and all of its child ParseNodes.</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            <span class="keyword">internal</span> <span class="keyword">abstract</span> <span class="keywordtype">string</span> <a class="code" href="a00142.html#a0d6611653f20c2e4d90a97a96c657137">PrintTree</a> (<span class="keywordtype">int</span> indentLevel);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="a00142.html#a58b3a15788fd2d4127d73619dc6d04ae">   76</a></span>&#160;            <span class="keyword">internal</span> <span class="keywordtype">string</span>[] <a class="code" href="a00142.html#a58b3a15788fd2d4127d73619dc6d04ae">tags</a> = {};</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="a00142.html#a054f36c80d5eeacd569a8859f599af67">   78</a></span>&#160;            <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="a00142.html#a054f36c80d5eeacd569a8859f599af67">TagsToString</a>(<span class="keywordtype">int</span> indentLevel)</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="a00142.html#a58b3a15788fd2d4127d73619dc6d04ae">tags</a>.Length &gt; 0) {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                    var s = <span class="keyword">new</span> StringBuilder ();</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                    s.Append (<a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a> (indentLevel + 1, <span class="stringliteral">&quot;Tags:&quot;</span>));</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                    <span class="keywordflow">foreach</span> (var tag <span class="keywordflow">in</span> this.<a class="code" href="a00142.html#a58b3a15788fd2d4127d73619dc6d04ae">tags</a>) {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                        s.Append(<a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a> (indentLevel + 2, <span class="stringliteral">&quot;#&quot;</span> + tag));</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                    }</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                    <span class="keywordflow">return</span> s.ToString ();</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            }</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="a00142.html#a18c67cb16090d0889bb9d6c8c6c565f8">   94</a></span>&#160;            <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">string</span> <a class="code" href="a00142.html#a18c67cb16090d0889bb9d6c8c6c565f8">ToString</a> ()</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                <span class="keywordflow">return</span> this.GetType ().Name;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            <span class="comment">// The closest parent to this ParseNode that is a Node.</span></div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="a00142.html#a580e520a29444fc23ac3660cbe514a09">  100</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00132.html">Node</a> <a class="code" href="a00142.html#a580e520a29444fc23ac3660cbe514a09">NodeParent</a>() {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                var node = <span class="keyword">this</span>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                    <span class="keywordflow">if</span> (node is <a class="code" href="a00132.html">Node</a>) {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                        <span class="keywordflow">return</span> node as Node;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                    }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                    node = node.parent;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                } <span class="keywordflow">while</span> (node</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                    != null);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        }</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="comment">// The top-level unit of parsing.</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="comment">// Node = (Statement)* EndOfInput</span></div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="a00132.html">  117</a></span>&#160;        <span class="keyword">internal</span> <span class="keyword">class </span><a class="code" href="a00132.html">Node</a> : <a class="code" href="a00142.html">ParseNode</a> {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="a00132.html#a3cfa07840da3a7a92c820788e902aefb">  119</a></span>&#160;            <span class="keyword">internal</span> <span class="keywordtype">string</span> <a class="code" href="a00132.html#a3cfa07840da3a7a92c820788e902aefb">name</a> { <span class="keyword">get</span>; set;}</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="a00132.html#a005a6b0f614beb77708fc5ce8fea66e1">  121</a></span>&#160;            <span class="keyword">internal</span> <span class="keywordtype">string</span> <a class="code" href="a00132.html#a005a6b0f614beb77708fc5ce8fea66e1">source</a> { <span class="keyword">get</span>; set; }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            <span class="comment">// defined in the Yarn editor</span></div>
<div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="a00132.html#a7b1e55929dd7c9b1b0349a70d1787f2a">  124</a></span>&#160;            <span class="keyword">internal</span> List&lt;string&gt; <a class="code" href="a00132.html#a7b1e55929dd7c9b1b0349a70d1787f2a">nodeTags</a> { <span class="keyword">get</span>; set; }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <span class="comment">// Read-only internal accessor for statements</span></div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="a00132.html#abdae3fb1c6927b38ce29b1b71a00cb12">  127</a></span>&#160;            <span class="keyword">internal</span> IEnumerable&lt;Statement&gt; <a class="code" href="a00132.html#abdae3fb1c6927b38ce29b1b71a00cb12">statements</a> { <span class="keyword">get</span> { <span class="keywordflow">return</span> <a class="code" href="a00132.html#ae910a20906be9b1964499efaefa48274">_statements</a>; }}</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="comment">// The statements in this node</span></div>
<div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="a00132.html#ae910a20906be9b1964499efaefa48274">  130</a></span>&#160;            List&lt;Statement&gt; <a class="code" href="a00132.html#ae910a20906be9b1964499efaefa48274">_statements</a> = <span class="keyword">new</span> List&lt;Statement&gt; ();</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="a00132.html#ae0562dc06ca747307b66039ef2f28772">  132</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00132.html#ae0562dc06ca747307b66039ef2f28772">Node</a>(<span class="keywordtype">string</span> <a class="code" href="a00132.html#a3cfa07840da3a7a92c820788e902aefb">name</a>, <a class="code" href="a00142.html">ParseNode</a> <a class="code" href="a00142.html#af313a82103fcc2ff5a177dbb06b92f7b">parent</a>, <a class="code" href="a00143.html">Parser</a> p) : base(parent, p) {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                this.name = <a class="code" href="a00132.html#a3cfa07840da3a7a92c820788e902aefb">name</a>;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                <span class="comment">// Consume statements until we run out of input or we hit a dedent</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                <span class="keywordflow">while</span> (p.<a class="code" href="a00143.html#a1a4de646937057988b59d2ff8035eae3">tokens</a>.Count &gt; 0 &amp;&amp; p.<a class="code" href="a00143.html#a666a945da1a7845b02b92592fccac291">NextSymbolIs</a>(<a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.Dedent,<a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.EndOfInput) == <span class="keyword">false</span>) {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                    _statements.Add(<span class="keyword">new</span> <a class="code" href="a00160.html">Statement</a>(<span class="keyword">this</span>, p));</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            }</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            <span class="comment">// Print the statements we have</span></div>
<div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="a00132.html#ab11501ebf251fdaa7cfe44edfa993068">  142</a></span>&#160;            <span class="keyword">internal</span> <span class="keyword">override</span> <span class="keywordtype">string</span> <a class="code" href="a00132.html#ab11501ebf251fdaa7cfe44edfa993068">PrintTree</a> (<span class="keywordtype">int</span> indentLevel)</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            {</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                var sb = <span class="keyword">new</span> StringBuilder ();</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                sb.Append (<a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a> (indentLevel, <span class="stringliteral">&quot;Node &quot;</span>+<a class="code" href="a00132.html#a3cfa07840da3a7a92c820788e902aefb">name</a>+<span class="stringliteral">&quot; {&quot;</span>));</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                <span class="keywordflow">foreach</span> (var statement <span class="keywordflow">in</span> <a class="code" href="a00132.html#ae910a20906be9b1964499efaefa48274">_statements</a>) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                    sb.Append( statement.PrintTree (indentLevel + 1));</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                sb.Append (<a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a> (indentLevel, <span class="stringliteral">&quot;}&quot;</span>));</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                <span class="keywordflow">return</span> sb.ToString();</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="comment">// Statements are the items of execution in nodes.</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="comment">// Statement = Block</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="comment">// Statement = IfStatement</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="comment">// Statement = OptionStatement</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="comment">// Statement = ShortcutOptionGroup</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="comment">// Statement = CustomCommand</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="comment">// Statement = AssignmentStatement</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="comment">// Statement = &lt;Text&gt;</span></div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="a00160.html">  163</a></span>&#160;        <span class="keyword">internal</span> <span class="keyword">class </span><a class="code" href="a00160.html">Statement</a> : <a class="code" href="a00142.html">ParseNode</a> {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="a00160.html#a518000e4e6219ce5f9f4229f505cd944">  165</a></span>&#160;            <span class="keyword">internal</span> <span class="keyword">enum</span> <a class="code" href="a00160.html#a518000e4e6219ce5f9f4229f505cd944">Type</a> {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                <a class="code" href="a00160.html#a518000e4e6219ce5f9f4229f505cd944af6b081742758e5cbc3a2e679e521a4fe">CustomCommand</a>,</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                <a class="code" href="a00160.html#a518000e4e6219ce5f9f4229f505cd944ae8a0b2e51320b69d57d378776ee0647a">ShortcutOptionGroup</a>,</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                <a class="code" href="a00160.html#a518000e4e6219ce5f9f4229f505cd944ae1e4c8c9ccd9fc39c391da4bcd093fb2">Block</a>,</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                <a class="code" href="a00160.html#a518000e4e6219ce5f9f4229f505cd944a69bf1eda358268e97a9d792c0e88b10d">IfStatement</a>,</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                <a class="code" href="a00160.html#a518000e4e6219ce5f9f4229f505cd944a7e5b9e4625bac525ed765621cb074ef7">OptionStatement</a>,</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                <a class="code" href="a00160.html#a518000e4e6219ce5f9f4229f505cd944a4ee9d26530a9c097d63b74d383c48341">AssignmentStatement</a>,</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                <a class="code" href="a00045.html#a00365">Line</a></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div>
<div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="a00160.html#aa3fa0eb260e412720562ce06b7dc06fe">  175</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00160.html#a518000e4e6219ce5f9f4229f505cd944">Statement.Type</a> <a class="code" href="a00160.html#aa3fa0eb260e412720562ce06b7dc06fe">type</a> { <span class="keyword">get</span>; <span class="keyword">private</span> set; }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            <span class="comment">// The possible types of statements we can have</span></div>
<div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="a00160.html#ac14dfc7210974b4cd86402ed011fb0b6">  178</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00037.html">Block</a> <a class="code" href="a00160.html#ac14dfc7210974b4cd86402ed011fb0b6">block</a> { <span class="keyword">get</span>; <span class="keyword">private</span> set;}</div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="a00160.html#a9a71577456598af0f25b23ccd02154e4">  179</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00112.html">IfStatement</a> <a class="code" href="a00160.html#a9a71577456598af0f25b23ccd02154e4">ifStatement</a> {<span class="keyword">get</span>; <span class="keyword">private</span> set;}</div>
<div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="a00160.html#a15020b7dab4983adbd185d5c2c2ebe84">  180</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00140.html">OptionStatement</a> <a class="code" href="a00160.html#a15020b7dab4983adbd185d5c2c2ebe84">optionStatement</a> {<span class="keyword">get</span>; <span class="keyword">private</span> set;}</div>
<div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="a00160.html#a7fa97a80f1b9313bc2bd4194e3f75759">  181</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00033.html">AssignmentStatement</a> <a class="code" href="a00160.html#a7fa97a80f1b9313bc2bd4194e3f75759">assignmentStatement</a> {<span class="keyword">get</span>; <span class="keyword">private</span> set;}</div>
<div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="a00160.html#a8a98e7d4c66f9909da865f0e671d69f2">  182</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00077.html">CustomCommand</a> <a class="code" href="a00160.html#a8a98e7d4c66f9909da865f0e671d69f2">customCommand</a> {<span class="keyword">get</span>;<span class="keyword">private</span> set;}</div>
<div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="a00160.html#a37695c7b00776bb292fd64894a70fb72">  183</a></span>&#160;            <span class="keyword">internal</span> <span class="keywordtype">string</span> <a class="code" href="a00160.html#a37695c7b00776bb292fd64894a70fb72">line</a> {<span class="keyword">get</span>; <span class="keyword">private</span> set;}</div>
<div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="a00160.html#a54d73ad69c4af4a0d61edeaea4c8ca4f">  184</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00154.html">ShortcutOptionGroup</a> <a class="code" href="a00160.html#a54d73ad69c4af4a0d61edeaea4c8ca4f">shortcutOptionGroup</a> { <span class="keyword">get</span>; <span class="keyword">private</span> set; }</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div>
<div class="line"><a name="l00186"></a><span class="lineno"><a class="line" href="a00160.html#acba736ffbcc0f8bf5cee2b23f7733dff">  186</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00160.html#acba736ffbcc0f8bf5cee2b23f7733dff">Statement</a>(<a class="code" href="a00142.html">ParseNode</a> <a class="code" href="a00142.html#af313a82103fcc2ff5a177dbb06b92f7b">parent</a>, <a class="code" href="a00143.html">Parser</a> p) : base(parent, p) {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="a00037.html">Block</a>.<a class="code" href="a00037.html#a7fa97243e2a807c2255988547d31cac7">CanParse</a>(p)) {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                    <a class="code" href="a00160.html#aa3fa0eb260e412720562ce06b7dc06fe">type</a> = Type.Block;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                    <a class="code" href="a00160.html#ac14dfc7210974b4cd86402ed011fb0b6">block</a> = <span class="keyword">new</span> <a class="code" href="a00160.html#a518000e4e6219ce5f9f4229f505cd944ae1e4c8c9ccd9fc39c391da4bcd093fb2">Block</a>(<span class="keyword">this</span>, p);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="a00112.html">IfStatement</a>.<a class="code" href="a00112.html#afd6b96e1a27872701c4e6832f17fc3ce">CanParse</a>(p)) {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                    <a class="code" href="a00160.html#aa3fa0eb260e412720562ce06b7dc06fe">type</a> = Type.IfStatement;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                    <a class="code" href="a00160.html#a9a71577456598af0f25b23ccd02154e4">ifStatement</a> = <span class="keyword">new</span> <a class="code" href="a00160.html#a518000e4e6219ce5f9f4229f505cd944a69bf1eda358268e97a9d792c0e88b10d">IfStatement</a>(<span class="keyword">this</span>, p);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="a00140.html">OptionStatement</a>.<a class="code" href="a00140.html#a1ffeca22df52451120cb362f90fd4e9f">CanParse</a>(p)) {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                    <a class="code" href="a00160.html#aa3fa0eb260e412720562ce06b7dc06fe">type</a> = Type.OptionStatement;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                    <a class="code" href="a00160.html#a15020b7dab4983adbd185d5c2c2ebe84">optionStatement</a> = <span class="keyword">new</span> <a class="code" href="a00160.html#a518000e4e6219ce5f9f4229f505cd944a7e5b9e4625bac525ed765621cb074ef7">OptionStatement</a>(<span class="keyword">this</span>, p);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="a00033.html">AssignmentStatement</a>.<a class="code" href="a00033.html#a4f021e4c835e429ed5b5bb504a5acf39">CanParse</a>(p)) {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                    <a class="code" href="a00160.html#aa3fa0eb260e412720562ce06b7dc06fe">type</a> = Type.AssignmentStatement;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                    <a class="code" href="a00160.html#a7fa97a80f1b9313bc2bd4194e3f75759">assignmentStatement</a> = <span class="keyword">new</span> <a class="code" href="a00160.html#a518000e4e6219ce5f9f4229f505cd944a4ee9d26530a9c097d63b74d383c48341">AssignmentStatement</a>(<span class="keyword">this</span>, p);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="a00154.html">ShortcutOptionGroup</a>.<a class="code" href="a00154.html#a906962aae2ecb11535f34249a34703f8">CanParse</a>(p)) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                    <a class="code" href="a00160.html#aa3fa0eb260e412720562ce06b7dc06fe">type</a> = Type.ShortcutOptionGroup;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                    <a class="code" href="a00160.html#a54d73ad69c4af4a0d61edeaea4c8ca4f">shortcutOptionGroup</a> = <span class="keyword">new</span> <a class="code" href="a00160.html#a518000e4e6219ce5f9f4229f505cd944ae8a0b2e51320b69d57d378776ee0647a">ShortcutOptionGroup</a>(<span class="keyword">this</span>, p);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="a00077.html">CustomCommand</a>.<a class="code" href="a00077.html#a02ee2902115c823bdb46715041b3a2f6">CanParse</a>(p)) {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                    <a class="code" href="a00160.html#aa3fa0eb260e412720562ce06b7dc06fe">type</a> = Type.CustomCommand;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                    <a class="code" href="a00160.html#a8a98e7d4c66f9909da865f0e671d69f2">customCommand</a> = <span class="keyword">new</span> <a class="code" href="a00160.html#a518000e4e6219ce5f9f4229f505cd944af6b081742758e5cbc3a2e679e521a4fe">CustomCommand</a>(<span class="keyword">this</span>, p);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p.<a class="code" href="a00143.html#a666a945da1a7845b02b92592fccac291">NextSymbolIs</a>(<a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.Text)) {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                    <a class="code" href="a00160.html#a37695c7b00776bb292fd64894a70fb72">line</a> = p.ExpectSymbol(TokenType.Text).value as <span class="keywordtype">string</span>;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                    <a class="code" href="a00160.html#aa3fa0eb260e412720562ce06b7dc06fe">type</a> = Type.Line;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                    <span class="keywordflow">throw</span> ParseException.Make(p.tokens.Peek(), <span class="stringliteral">&quot;Expected a statement here but got &quot;</span> + p.<a class="code" href="a00143.html#a1a4de646937057988b59d2ff8035eae3">tokens</a>.Peek().ToString() +<span class="stringliteral">&quot; instead (was there an unbalanced if statement earlier?)&quot;</span>);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                <span class="comment">// Parse the optional tags that follow this statement</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                var <a class="code" href="a00142.html#a58b3a15788fd2d4127d73619dc6d04ae">tags</a> = <span class="keyword">new</span> List&lt;string&gt;();</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                <span class="keywordflow">while</span> (p.<a class="code" href="a00143.html#a666a945da1a7845b02b92592fccac291">NextSymbolIs</a>(<a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.TagMarker)) {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                    p.ExpectSymbol(TokenType.TagMarker);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                    var tag = p.ExpectSymbol(TokenType.Identifier).value;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                    tags.Add(tag);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                <span class="keywordflow">if</span> (tags.Count &gt; 0)</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                    this.tags = tags.ToArray();</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div>
<div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="a00160.html#aaac6d1e0c3b31f33e1c6f964c205153e">  226</a></span>&#160;            <span class="keyword">internal</span> <span class="keyword">override</span> <span class="keywordtype">string</span> <a class="code" href="a00160.html#aaac6d1e0c3b31f33e1c6f964c205153e">PrintTree</a> (<span class="keywordtype">int</span> indentLevel)</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                StringBuilder s = <span class="keyword">new</span> StringBuilder ();</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                <span class="keywordflow">switch</span> (<a class="code" href="a00160.html#aa3fa0eb260e412720562ce06b7dc06fe">type</a>) {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                <span class="keywordflow">case</span> Type.Block:</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                    s.Append(block.PrintTree (indentLevel));</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                <span class="keywordflow">case</span> Type.IfStatement:</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                    s.Append (ifStatement.PrintTree (indentLevel));</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                <span class="keywordflow">case</span> Type.OptionStatement:</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                    s.Append (optionStatement.PrintTree (indentLevel));</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                <span class="keywordflow">case</span> Type.AssignmentStatement:</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                    s.Append (assignmentStatement.PrintTree (indentLevel));</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                <span class="keywordflow">case</span> Type.ShortcutOptionGroup:</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                    s.Append (shortcutOptionGroup.PrintTree (indentLevel));</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                <span class="keywordflow">case</span> Type.CustomCommand:</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                    s.Append (customCommand.PrintTree (indentLevel));</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                <span class="keywordflow">case</span> Type.Line:</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                    s.Append (<a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a> (indentLevel, <span class="stringliteral">&quot;Line: &quot;</span> + <a class="code" href="a00160.html#a37695c7b00776bb292fd64894a70fb72">line</a>));</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException ();</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                }</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                s.Append (<a class="code" href="a00142.html#a054f36c80d5eeacd569a8859f599af67">TagsToString</a> (indentLevel));</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                <span class="keywordflow">return</span> s.ToString ();</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="comment">// Custom commands are meant to be interpreted by whatever</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="comment">// system that owns this dialogue sytem. eg &lt;&lt;stand&gt;&gt;</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="comment">// CustomCommand = BeginCommand &lt;ANY&gt;* EndCommand</span></div>
<div class="line"><a name="l00265"></a><span class="lineno"><a class="line" href="a00077.html">  265</a></span>&#160;        <span class="keyword">internal</span> <span class="keyword">class </span><a class="code" href="a00077.html">CustomCommand</a> : <a class="code" href="a00142.html">ParseNode</a> {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div>
<div class="line"><a name="l00267"></a><span class="lineno"><a class="line" href="a00077.html#a1d9f9f57c44e1a0d228793b658339576">  267</a></span>&#160;            <span class="keyword">internal</span> <span class="keyword">enum</span> <a class="code" href="a00077.html#a1d9f9f57c44e1a0d228793b658339576">Type</a> {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                <a class="code" href="a00077.html#a1d9f9f57c44e1a0d228793b658339576aa1a6657be79cc0fc1e9b23b9e108f043">Expression</a>,</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                <a class="code" href="a00077.html#a1d9f9f57c44e1a0d228793b658339576a278e9647d033d0df032a22caa7265586">ClientCommand</a></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            }</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div>
<div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="a00077.html#a5ef3bc96812be224d91548bfcdfd4b92">  272</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00077.html#a1d9f9f57c44e1a0d228793b658339576">Type</a> <a class="code" href="a00077.html#a5ef3bc96812be224d91548bfcdfd4b92">type</a>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div>
<div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="a00077.html#a4250d192d5b58e2404a14c68eb616f16">  274</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00098.html">Expression</a> <a class="code" href="a00077.html#a4250d192d5b58e2404a14c68eb616f16">expression</a> {<span class="keyword">get</span>; <span class="keyword">private</span> set;}</div>
<div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="a00077.html#a1a362244273df822233359d8fe4e9f5d">  275</a></span>&#160;            <span class="keyword">internal</span> <span class="keywordtype">string</span> <a class="code" href="a00077.html#a1a362244273df822233359d8fe4e9f5d">clientCommand</a> { <span class="keyword">get</span>; <span class="keyword">private</span> set;}</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div>
<div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="a00077.html#a02ee2902115c823bdb46715041b3a2f6">  277</a></span>&#160;            <span class="keyword">internal</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="a00077.html#a02ee2902115c823bdb46715041b3a2f6">CanParse</a> (<a class="code" href="a00143.html">Parser</a> p)</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                <span class="keywordflow">return</span> p.NextSymbolsAre (TokenType.BeginCommand, TokenType.Text) ||</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                    p.<a class="code" href="a00143.html#afaa7e96d4cdaf6b1fde9ecd273c00c34">NextSymbolsAre</a> (<a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.BeginCommand, <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.Identifier);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div>
<div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="a00077.html#a49150c9046dcad61d61ce35c51816313">  283</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00077.html#a49150c9046dcad61d61ce35c51816313">CustomCommand</a>(<a class="code" href="a00142.html">ParseNode</a> <a class="code" href="a00142.html#af313a82103fcc2ff5a177dbb06b92f7b">parent</a>, <a class="code" href="a00143.html">Parser</a> p) : base(parent, p) {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                p.ExpectSymbol(TokenType.BeginCommand);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                <span class="comment">// Custom commands can have ANY token in them. Read them all until we hit the</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                <span class="comment">// end command token.</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                var commandTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                    commandTokens.Add(p.ExpectSymbol());</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                } <span class="keywordflow">while</span> (p.<a class="code" href="a00143.html#a666a945da1a7845b02b92592fccac291">NextSymbolIs</a>(<a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.EndCommand) == <span class="keyword">false</span>);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                p.ExpectSymbol(TokenType.EndCommand);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                <span class="comment">// If the first token is an identifier and the second is</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                <span class="comment">// a left paren, it may be a function call expression;</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                <span class="comment">// evaluate it as such</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                <span class="keywordflow">if</span> (commandTokens.Count &gt; 1 &amp;&amp;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                    commandTokens[0].type == <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.Identifier &amp;&amp;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                    commandTokens[1].type == <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.LeftParen) {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                    var parser = <span class="keyword">new</span> <a class="code" href="a00143.html#acd2714b911fb5e7c38f0e07a9dc1af58">Parser</a>(commandTokens, p.<a class="code" href="a00143.html#a1313951b09177a1c83b6cf035139197a">library</a>);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                    var <a class="code" href="a00077.html#a4250d192d5b58e2404a14c68eb616f16">expression</a> = Expression.Parse(<span class="keyword">this</span>, parser);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                    <a class="code" href="a00077.html#a5ef3bc96812be224d91548bfcdfd4b92">type</a> = Type.Expression;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                    this.expression = <a class="code" href="a00077.html#a4250d192d5b58e2404a14c68eb616f16">expression</a>;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                    <span class="comment">// Otherwise, evaluate it as a command</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                    <a class="code" href="a00077.html#a5ef3bc96812be224d91548bfcdfd4b92">type</a> = Type.ClientCommand;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                    this.clientCommand = commandTokens[0].value;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div>
<div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="a00077.html#ad8c821f5f5671cdbac6e4a6fc0b9174b">  314</a></span>&#160;            <span class="keyword">internal</span> <span class="keyword">override</span> <span class="keywordtype">string</span> <a class="code" href="a00077.html#ad8c821f5f5671cdbac6e4a6fc0b9174b">PrintTree</a> (<span class="keywordtype">int</span> indentLevel)</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                <span class="keywordflow">switch</span> (<a class="code" href="a00077.html#a5ef3bc96812be224d91548bfcdfd4b92">type</a>) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                <span class="keywordflow">case</span> Type.Expression:</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a> (indentLevel, <span class="stringliteral">&quot;Expression: &quot;</span>) + expression.PrintTree (indentLevel + 1);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                <span class="keywordflow">case</span> Type.ClientCommand:</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a> (indentLevel, <span class="stringliteral">&quot;Command: &quot;</span> + <a class="code" href="a00077.html#a1a362244273df822233359d8fe4e9f5d">clientCommand</a>);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="comment">// Shortcut option groups are groups of shortcut options,</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="comment">// followed by the node that they rejoin.</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="comment">// ShortcutOptionGroup = ShortcutOption+ Node</span></div>
<div class="line"><a name="l00330"></a><span class="lineno"><a class="line" href="a00154.html">  330</a></span>&#160;        <span class="keyword">internal</span> <span class="keyword">class </span><a class="code" href="a00154.html">ShortcutOptionGroup</a> : <a class="code" href="a00142.html">ParseNode</a> {</div>
<div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="a00154.html#a906962aae2ecb11535f34249a34703f8">  331</a></span>&#160;            <span class="keyword">internal</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="a00154.html#a906962aae2ecb11535f34249a34703f8">CanParse</a> (<a class="code" href="a00143.html">Parser</a> p)</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                <span class="keywordflow">return</span> p.NextSymbolIs (TokenType.ShortcutOption);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            }</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div>
<div class="line"><a name="l00336"></a><span class="lineno"><a class="line" href="a00154.html#a91b28e9dce684c476c526c4103b6c488">  336</a></span>&#160;            <span class="keyword">internal</span> IEnumerable&lt;ShortcutOption&gt; <a class="code" href="a00154.html#a91b28e9dce684c476c526c4103b6c488">options</a> { <span class="keyword">get</span> { <span class="keywordflow">return</span> <a class="code" href="a00154.html#a494c8c422cebbea5c50878db64334873">_options</a>; }}</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            <span class="comment">// The options in this group</span></div>
<div class="line"><a name="l00339"></a><span class="lineno"><a class="line" href="a00154.html#a494c8c422cebbea5c50878db64334873">  339</a></span>&#160;            <span class="keyword">private</span> List&lt;ShortcutOption&gt; <a class="code" href="a00154.html#a494c8c422cebbea5c50878db64334873">_options</a> = <span class="keyword">new</span> List&lt;ShortcutOption&gt;();</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div>
<div class="line"><a name="l00341"></a><span class="lineno"><a class="line" href="a00154.html#aa4ee47826640ad8dff651603c940c7f4">  341</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00154.html#aa4ee47826640ad8dff651603c940c7f4">ShortcutOptionGroup</a>(<a class="code" href="a00142.html">ParseNode</a> <a class="code" href="a00142.html#af313a82103fcc2ff5a177dbb06b92f7b">parent</a>, <a class="code" href="a00143.html">Parser</a> p) : base(parent, p) {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                <span class="comment">// keep parsing options until we can&#39;t, but expect at least one (otherwise it&#39;s</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                <span class="comment">// not actually a list of options)</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                <span class="keywordtype">int</span> shortcutIndex = 1; <span class="comment">// give each option a number so it can name itself</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                    _options.Add(<span class="keyword">new</span> <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeacea07001155edc33437d76742b7ac124529">ShortcutOption</a>(shortcutIndex++, <span class="keyword">this</span>, p));</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                } <span class="keywordflow">while</span> (p.<a class="code" href="a00143.html#a666a945da1a7845b02b92592fccac291">NextSymbolIs</a>(<a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.ShortcutOption));</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            }</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div>
<div class="line"><a name="l00351"></a><span class="lineno"><a class="line" href="a00154.html#a7b60f85e46b8767db81177ec40e83104">  351</a></span>&#160;            <span class="keyword">internal</span> <span class="keyword">override</span> <span class="keywordtype">string</span> <a class="code" href="a00154.html#a7b60f85e46b8767db81177ec40e83104">PrintTree</a> (<span class="keywordtype">int</span> indentLevel)</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                var sb = <span class="keyword">new</span> StringBuilder ();</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                sb.Append (<a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a> (indentLevel, <span class="stringliteral">&quot;Shortcut option group {&quot;</span>));</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                <span class="keywordflow">foreach</span> (var option <span class="keywordflow">in</span> <a class="code" href="a00154.html#a91b28e9dce684c476c526c4103b6c488">options</a>) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                    sb.Append (option.PrintTree (indentLevel + 1));</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                sb.Append (<a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a> (indentLevel, <span class="stringliteral">&quot;}&quot;</span>));</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                <span class="keywordflow">return</span> sb.ToString ();</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="comment">// Shortcut options are a convenient way to define new options.</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="comment">// ShortcutOption = -&gt; &lt;text&gt; [BeginCommand If Expression EndCommand] [Block]</span></div>
<div class="line"><a name="l00368"></a><span class="lineno"><a class="line" href="a00153.html">  368</a></span>&#160;        <span class="keyword">internal</span> <span class="keyword">class </span><a class="code" href="a00153.html">ShortcutOption</a> : <a class="code" href="a00142.html">ParseNode</a> {</div>
<div class="line"><a name="l00369"></a><span class="lineno"><a class="line" href="a00153.html#ab43ec731479a56891389f6ece87f5f62">  369</a></span>&#160;            <span class="keyword">internal</span> <span class="keywordtype">string</span> <a class="code" href="a00153.html#ab43ec731479a56891389f6ece87f5f62">label</a> { <span class="keyword">get</span>; <span class="keyword">private</span> set;}</div>
<div class="line"><a name="l00370"></a><span class="lineno"><a class="line" href="a00153.html#a31ece7f65af1e43961b68ba0275cdfaf">  370</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00098.html">Expression</a> <a class="code" href="a00153.html#a31ece7f65af1e43961b68ba0275cdfaf">condition</a> { <span class="keyword">get</span>; <span class="keyword">private</span> set;}</div>
<div class="line"><a name="l00371"></a><span class="lineno"><a class="line" href="a00153.html#a33d667370031f58b054b79a39891c3f3">  371</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00132.html">Node</a> <a class="code" href="a00153.html#a33d667370031f58b054b79a39891c3f3">optionNode</a> { <span class="keyword">get</span>; <span class="keyword">private</span> set;}</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div>
<div class="line"><a name="l00373"></a><span class="lineno"><a class="line" href="a00153.html#a2c80b137d65f31b24533987233074605">  373</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00153.html#a2c80b137d65f31b24533987233074605">ShortcutOption</a>(<span class="keywordtype">int</span> optionIndex, <a class="code" href="a00142.html">ParseNode</a> <a class="code" href="a00142.html#af313a82103fcc2ff5a177dbb06b92f7b">parent</a>, <a class="code" href="a00143.html">Parser</a> p) : base(parent, p) {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                p.ExpectSymbol(TokenType.ShortcutOption);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                <a class="code" href="a00153.html#ab43ec731479a56891389f6ece87f5f62">label</a> = p.ExpectSymbol(TokenType.Text).value as <span class="keywordtype">string</span>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                <span class="comment">// Parse the conditional (&quot;&lt;&lt;if $foo&gt;&gt;&quot;) if it&#39;s there</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                var <a class="code" href="a00142.html#a58b3a15788fd2d4127d73619dc6d04ae">tags</a> = <span class="keyword">new</span> List&lt;string&gt;();</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                <span class="keywordflow">while</span> (</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                    p.<a class="code" href="a00143.html#afaa7e96d4cdaf6b1fde9ecd273c00c34">NextSymbolsAre</a>(<a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.BeginCommand, <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.If) ||</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                    p.NextSymbolIs(TokenType.TagMarker)) {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                    <span class="keywordflow">if</span> (p.<a class="code" href="a00143.html#afaa7e96d4cdaf6b1fde9ecd273c00c34">NextSymbolsAre</a>(<a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.BeginCommand, <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.If)) {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                        p.ExpectSymbol(TokenType.BeginCommand);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                        p.ExpectSymbol(TokenType.If);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                        <a class="code" href="a00153.html#a31ece7f65af1e43961b68ba0275cdfaf">condition</a> = Expression.Parse(<span class="keyword">this</span>, p);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                        p.ExpectSymbol(TokenType.EndCommand);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p.<a class="code" href="a00143.html#a666a945da1a7845b02b92592fccac291">NextSymbolIs</a>(<a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.TagMarker)) {</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                        p.ExpectSymbol(TokenType.TagMarker);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                        var tag = p.ExpectSymbol(TokenType.Identifier).value;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                        tags.Add(tag);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                    }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                this.tags = tags.ToArray();</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                <span class="comment">// Parse the statements belonging to this option if it has any</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                <span class="keywordflow">if</span> (p.<a class="code" href="a00143.html#a666a945da1a7845b02b92592fccac291">NextSymbolIs</a>(<a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.Indent)) {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                    p.ExpectSymbol(TokenType.Indent);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                    <a class="code" href="a00153.html#a33d667370031f58b054b79a39891c3f3">optionNode</a> = <span class="keyword">new</span> <a class="code" href="a00132.html">Node</a>(<a class="code" href="a00142.html#a580e520a29444fc23ac3660cbe514a09">NodeParent</a>().name + <span class="stringliteral">&quot;.&quot;</span> + optionIndex, <span class="keyword">this</span>, p);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                    p.ExpectSymbol(TokenType.Dedent);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            }</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div>
<div class="line"><a name="l00409"></a><span class="lineno"><a class="line" href="a00153.html#a529a2ef1aa6d7226db4ea7f3ea92b8c2">  409</a></span>&#160;            <span class="keyword">internal</span> <span class="keyword">override</span> <span class="keywordtype">string</span> <a class="code" href="a00153.html#a529a2ef1aa6d7226db4ea7f3ea92b8c2">PrintTree</a> (<span class="keywordtype">int</span> indentLevel)</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                var sb = <span class="keyword">new</span> StringBuilder ();</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                sb.Append (<a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a> (indentLevel, <span class="stringliteral">&quot;Option \&quot;&quot;</span> +<a class="code" href="a00153.html#ab43ec731479a56891389f6ece87f5f62">label</a> + <span class="stringliteral">&quot;\&quot;&quot;</span>));</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="a00153.html#a31ece7f65af1e43961b68ba0275cdfaf">condition</a> != null) {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                    sb.Append (<a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a> (indentLevel + 1, <span class="stringliteral">&quot;(when:&quot;</span>));</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                    sb.Append (condition.PrintTree(indentLevel+2));</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                    sb.Append (<a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a> (indentLevel + 1, <span class="stringliteral">&quot;),&quot;</span>));</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                }</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="a00153.html#a33d667370031f58b054b79a39891c3f3">optionNode</a> != null) {</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                    sb.Append (<a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a> (indentLevel, <span class="stringliteral">&quot;{&quot;</span>));</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                    sb.Append (optionNode.PrintTree (indentLevel + 1));</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                    sb.Append (<a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a> (indentLevel, <span class="stringliteral">&quot;}&quot;</span>));</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                }</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                sb.Append (<a class="code" href="a00142.html#a054f36c80d5eeacd569a8859f599af67">TagsToString</a> (indentLevel));</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                <span class="keywordflow">return</span> sb.ToString ();</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        }</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <span class="comment">// Blocks are indented groups of statements</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <span class="comment">// Block = Indent Statement* Dedent</span></div>
<div class="line"><a name="l00435"></a><span class="lineno"><a class="line" href="a00037.html">  435</a></span>&#160;        <span class="keyword">internal</span> <span class="keyword">class </span><a class="code" href="a00037.html">Block</a> : <a class="code" href="a00142.html">ParseNode</a> {</div>
<div class="line"><a name="l00436"></a><span class="lineno"><a class="line" href="a00037.html#a7fa97243e2a807c2255988547d31cac7">  436</a></span>&#160;            <span class="keyword">internal</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="a00037.html#a7fa97243e2a807c2255988547d31cac7">CanParse</a> (<a class="code" href="a00143.html">Parser</a> p)</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                <span class="keywordflow">return</span> p.NextSymbolIs (TokenType.Indent);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div>
<div class="line"><a name="l00442"></a><span class="lineno"><a class="line" href="a00037.html#a42e3d555bbd5ecbdf61c45ad715be7e1">  442</a></span>&#160;            <span class="keyword">internal</span> IEnumerable&lt;Statement&gt; <a class="code" href="a00037.html#a42e3d555bbd5ecbdf61c45ad715be7e1">statements</a> { <span class="keyword">get</span> { <span class="keywordflow">return</span> <a class="code" href="a00037.html#ad79f9582e55ec75b68fd72ffcae0f41b">_statements</a>; }}</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div>
<div class="line"><a name="l00444"></a><span class="lineno"><a class="line" href="a00037.html#ad79f9582e55ec75b68fd72ffcae0f41b">  444</a></span>&#160;            List&lt;Statement&gt; <a class="code" href="a00037.html#ad79f9582e55ec75b68fd72ffcae0f41b">_statements</a> = <span class="keyword">new</span> List&lt;Statement&gt; ();</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div>
<div class="line"><a name="l00446"></a><span class="lineno"><a class="line" href="a00037.html#a943abeb93be783da7ff6ca595b6a34e7">  446</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00037.html#a943abeb93be783da7ff6ca595b6a34e7">Block</a>(<a class="code" href="a00142.html">ParseNode</a> <a class="code" href="a00142.html#af313a82103fcc2ff5a177dbb06b92f7b">parent</a>, <a class="code" href="a00143.html">Parser</a> p) : base(parent, p) {</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                <span class="comment">// Read the indent token</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                p.ExpectSymbol(TokenType.Indent);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                <span class="comment">// Keep reading statements until we hit a dedent</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                <span class="keywordflow">while</span> (p.<a class="code" href="a00143.html#a666a945da1a7845b02b92592fccac291">NextSymbolIs</a>(<a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.Dedent) == <span class="keyword">false</span>) {</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                    <span class="comment">// fun fact! because Blocks are a type of Statement,</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                    <span class="comment">// we get nested block parsing for free! \:D/</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                    _statements.Add(<span class="keyword">new</span> <a class="code" href="a00160.html">Statement</a>(<span class="keyword">this</span>, p));</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                }</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                <span class="comment">// Tidy up by reading the dedent</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                p.ExpectSymbol(TokenType.Dedent);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div>
<div class="line"><a name="l00463"></a><span class="lineno"><a class="line" href="a00037.html#aaaacfc4e3ff2871fa5e2fb75e48636de">  463</a></span>&#160;            <span class="keyword">internal</span> <span class="keyword">override</span> <span class="keywordtype">string</span> <a class="code" href="a00037.html#aaaacfc4e3ff2871fa5e2fb75e48636de">PrintTree</a> (<span class="keywordtype">int</span> indentLevel)</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            {</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                var sb = <span class="keyword">new</span> StringBuilder ();</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                sb.Append (<a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a>(indentLevel, <span class="stringliteral">&quot;Block {&quot;</span>));</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                <span class="keywordflow">foreach</span> (var statement <span class="keywordflow">in</span> <a class="code" href="a00037.html#ad79f9582e55ec75b68fd72ffcae0f41b">_statements</a>) {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                    sb.Append (statement.PrintTree (indentLevel + 1));</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                sb.Append (<a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a>(indentLevel, <span class="stringliteral">&quot;}&quot;</span>));</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                <span class="keywordflow">return</span> sb.ToString ();</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        }</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <span class="comment">// Options are links to other nodes</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="comment">// OptionStatement = OptionStart &lt;Text&gt; OptionEnd</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="comment">// OptionStatement = OptionStart &lt;Text&gt; OptionDelimit &lt;Text&gt;|&lt;Identifier&gt; OptionEnd</span></div>
<div class="line"><a name="l00479"></a><span class="lineno"><a class="line" href="a00140.html">  479</a></span>&#160;        <span class="keyword">internal</span> <span class="keyword">class </span><a class="code" href="a00140.html">OptionStatement</a> : <a class="code" href="a00142.html">ParseNode</a> {</div>
<div class="line"><a name="l00480"></a><span class="lineno"><a class="line" href="a00140.html#a1ffeca22df52451120cb362f90fd4e9f">  480</a></span>&#160;            <span class="keyword">internal</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="a00140.html#a1ffeca22df52451120cb362f90fd4e9f">CanParse</a> (<a class="code" href="a00143.html">Parser</a> p)</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            {</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                <span class="keywordflow">return</span> p.NextSymbolIs (TokenType.OptionStart);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            }</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div>
<div class="line"><a name="l00485"></a><span class="lineno"><a class="line" href="a00140.html#abbe56fba06169901508e6c659f06c236">  485</a></span>&#160;            <span class="keyword">internal</span> <span class="keywordtype">string</span> <a class="code" href="a00140.html#abbe56fba06169901508e6c659f06c236">destination</a> { <span class="keyword">get</span>; <span class="keyword">private</span> set;}</div>
<div class="line"><a name="l00486"></a><span class="lineno"><a class="line" href="a00140.html#a7f27d78e67fed6992767e995e70fc468">  486</a></span>&#160;            <span class="keyword">internal</span> <span class="keywordtype">string</span> <a class="code" href="a00140.html#a7f27d78e67fed6992767e995e70fc468">label</a> { <span class="keyword">get</span>; <span class="keyword">private</span> set;}</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div>
<div class="line"><a name="l00488"></a><span class="lineno"><a class="line" href="a00140.html#ad18938712d01cf71edbc75d4974cd0e0">  488</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00140.html#ad18938712d01cf71edbc75d4974cd0e0">OptionStatement</a>(<a class="code" href="a00142.html">ParseNode</a> <a class="code" href="a00142.html#af313a82103fcc2ff5a177dbb06b92f7b">parent</a>, <a class="code" href="a00143.html">Parser</a> p) : base(parent, p) {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                <span class="comment">// The meaning of the string(s) we have changes</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                <span class="comment">// depending on whether we have one or two, so</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                <span class="comment">// keep them both and decide their meaning once</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                <span class="comment">// we know more</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                <span class="keywordtype">string</span> firstString;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                <span class="keywordtype">string</span> secondString;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                <span class="comment">// Parse &quot;[[LABEL&quot;</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                p.ExpectSymbol(TokenType.OptionStart);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                firstString = p.ExpectSymbol(TokenType.Text).value as <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeacea27118326006d3829667a400ad23d5d98">String</a>;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                <span class="comment">// If there&#39;s a | in there, get the string that comes after it</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                <span class="keywordflow">if</span> (p.<a class="code" href="a00143.html#a666a945da1a7845b02b92592fccac291">NextSymbolIs</a>(<a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.OptionDelimit)) {</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                    p.ExpectSymbol(TokenType.OptionDelimit);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                    secondString = p.ExpectSymbol(TokenType.Text, TokenType.Identifier).value as <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeacea27118326006d3829667a400ad23d5d98">String</a>;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                    <span class="comment">// Two strings mean that the first is the label, and the second</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                    <span class="comment">// is the name of the node that we should head to if this option</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                    <span class="comment">// is selected</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                    <a class="code" href="a00140.html#a7f27d78e67fed6992767e995e70fc468">label</a> = firstString;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                    <a class="code" href="a00140.html#abbe56fba06169901508e6c659f06c236">destination</a> = secondString;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                    <span class="comment">// One string means we don&#39;t have a label</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                    <a class="code" href="a00140.html#a7f27d78e67fed6992767e995e70fc468">label</a> = null;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                    <a class="code" href="a00140.html#abbe56fba06169901508e6c659f06c236">destination</a> = firstString;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                }</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                <span class="comment">// Parse the closing ]]</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                p.ExpectSymbol(TokenType.OptionEnd);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            }</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div>
<div class="line"><a name="l00523"></a><span class="lineno"><a class="line" href="a00140.html#aafba8c941dbd3d0ef841ac9d472e1ba3">  523</a></span>&#160;            <span class="keyword">internal</span> <span class="keyword">override</span> <span class="keywordtype">string</span> <a class="code" href="a00140.html#aafba8c941dbd3d0ef841ac9d472e1ba3">PrintTree</a> (<span class="keywordtype">int</span> indentLevel)</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            {</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="a00140.html#a7f27d78e67fed6992767e995e70fc468">label</a> != null) {</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a> (indentLevel, <span class="keywordtype">string</span>.Format (<span class="stringliteral">&quot;Option: \&quot;{0}\&quot; -&gt; {1}&quot;</span>, <a class="code" href="a00140.html#a7f27d78e67fed6992767e995e70fc468">label</a>, <a class="code" href="a00140.html#abbe56fba06169901508e6c659f06c236">destination</a>));</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a> (indentLevel, <span class="keywordtype">string</span>.Format (<span class="stringliteral">&quot;Option: -&gt; {0}&quot;</span>, <a class="code" href="a00140.html#abbe56fba06169901508e6c659f06c236">destination</a>));</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                }</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            }</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        }</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <span class="comment">// If statements are the usual if-else-elseif-endif business.</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <span class="comment">// If = BeginCommand If Expression EndCommand Statement* BeginCommand EndIf EndCommand</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="comment">// TODO: elseif</span></div>
<div class="line"><a name="l00536"></a><span class="lineno"><a class="line" href="a00112.html">  536</a></span>&#160;        <span class="keyword">internal</span> <span class="keyword">class </span><a class="code" href="a00112.html">IfStatement</a> : <a class="code" href="a00142.html">ParseNode</a> {</div>
<div class="line"><a name="l00537"></a><span class="lineno"><a class="line" href="a00112.html#afd6b96e1a27872701c4e6832f17fc3ce">  537</a></span>&#160;            <span class="keyword">internal</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="a00112.html#afd6b96e1a27872701c4e6832f17fc3ce">CanParse</a> (<a class="code" href="a00143.html">Parser</a> p)</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            {</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                <span class="keywordflow">return</span> p.NextSymbolsAre (TokenType.BeginCommand, TokenType.If);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            }</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            <span class="comment">// Clauses are collections of statements with an</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            <span class="comment">// optional conditional that determines whether they&#39;re run</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            <span class="comment">// or not. The condition is used by the If and ElseIf parts of</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            <span class="comment">// an if statement, and not used by the Else statement.</span></div>
<div class="line"><a name="l00546"></a><span class="lineno"><a class="line" href="a00044.html">  546</a></span>&#160;            <span class="keyword">internal</span> <span class="keyword">struct </span><a class="code" href="a00044.html">Clause</a> {</div>
<div class="line"><a name="l00547"></a><span class="lineno"><a class="line" href="a00044.html#a1abd1f7c41f68ccdf64074ea49365be9">  547</a></span>&#160;                <span class="keyword">internal</span> <a class="code" href="a00098.html">Expression</a> <a class="code" href="a00044.html#a1abd1f7c41f68ccdf64074ea49365be9">expression</a>;</div>
<div class="line"><a name="l00548"></a><span class="lineno"><a class="line" href="a00044.html#a6f4765482e98ed042e38a0ede13f171f">  548</a></span>&#160;                <span class="keyword">internal</span> IEnumerable&lt;Statement&gt; <a class="code" href="a00044.html#a6f4765482e98ed042e38a0ede13f171f">statements</a>;</div>
<div class="line"><a name="l00549"></a><span class="lineno"><a class="line" href="a00044.html#a7f4fc9399896512b68fdc7bc7cf818c9">  549</a></span>&#160;                <span class="keyword">internal</span> <span class="keywordtype">string</span> <a class="code" href="a00044.html#a7f4fc9399896512b68fdc7bc7cf818c9">PrintTree</a>(<span class="keywordtype">int</span> indentLevel) {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                    var sb = <span class="keyword">new</span> StringBuilder ();</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="a00044.html#a1abd1f7c41f68ccdf64074ea49365be9">expression</a> != null)</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                        sb.Append (expression.PrintTree (indentLevel));</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                    sb.Append (<a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a> (indentLevel, <span class="stringliteral">&quot;{&quot;</span>));</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                    <span class="keywordflow">foreach</span> (var statement <span class="keywordflow">in</span> <a class="code" href="a00044.html#a6f4765482e98ed042e38a0ede13f171f">statements</a>) {</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                        sb.Append (statement.PrintTree (indentLevel + 1));</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                    }</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                    sb.Append (<a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a> (indentLevel, <span class="stringliteral">&quot;}&quot;</span>));</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                    <span class="keywordflow">return</span> sb.ToString ();</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                }</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            }</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div>
<div class="line"><a name="l00562"></a><span class="lineno"><a class="line" href="a00112.html#a679b1a21582c78ed06df36bccc9c3cbc">  562</a></span>&#160;            <span class="keyword">internal</span> List&lt;Clause&gt; <a class="code" href="a00112.html#a679b1a21582c78ed06df36bccc9c3cbc">clauses</a> = <span class="keyword">new</span> List&lt;Clause&gt;();</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div>
<div class="line"><a name="l00564"></a><span class="lineno"><a class="line" href="a00112.html#ae534078389e8663edf7660403acf3cbc">  564</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00112.html#ae534078389e8663edf7660403acf3cbc">IfStatement</a>(<a class="code" href="a00142.html">ParseNode</a> <a class="code" href="a00142.html#af313a82103fcc2ff5a177dbb06b92f7b">parent</a>, <a class="code" href="a00143.html">Parser</a> p) : base(parent, p) {</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                <span class="comment">// All if statements begin with &quot;&lt;&lt;if EXPRESSION&gt;&gt;&quot;, so parse that</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                <a class="code" href="a00044.html">Clause</a> primaryClause = <span class="keyword">new</span> <a class="code" href="a00044.html">Clause</a>();</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                p.ExpectSymbol(TokenType.BeginCommand);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                p.ExpectSymbol(TokenType.If);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                primaryClause.expression = Expression.Parse(<span class="keyword">this</span>, p);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                p.ExpectSymbol(TokenType.EndCommand);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                <span class="comment">// Read the statements for this clause until  we hit an &lt;&lt;endif or &lt;&lt;else</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                <span class="comment">// (which could be an &quot;&lt;&lt;else&gt;&gt;&quot; or an &quot;&lt;&lt;else if&quot;</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                var statements = <span class="keyword">new</span> List&lt;Statement&gt;();</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                <span class="keywordflow">while</span> (p.<a class="code" href="a00143.html#afaa7e96d4cdaf6b1fde9ecd273c00c34">NextSymbolsAre</a>(<a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.BeginCommand, <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.EndIf) == <span class="keyword">false</span> &amp;&amp;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                    p.NextSymbolsAre(TokenType.BeginCommand, TokenType.Else) == <span class="keyword">false</span> &amp;&amp;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                    p.<a class="code" href="a00143.html#afaa7e96d4cdaf6b1fde9ecd273c00c34">NextSymbolsAre</a>(<a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.BeginCommand, <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.ElseIf) == <span class="keyword">false</span>) {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                    statements.Add(<span class="keyword">new</span> <a class="code" href="a00160.html">Statement</a>(<span class="keyword">this</span>, p));</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                    <span class="comment">// Ignore any dedents</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                    <span class="keywordflow">while</span> (p.<a class="code" href="a00143.html#a666a945da1a7845b02b92592fccac291">NextSymbolIs</a>(<a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.Dedent)) {</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                        p.ExpectSymbol(TokenType.Dedent);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                    }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                }</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                primaryClause.statements = statements;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                clauses.Add(primaryClause);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                <span class="comment">// Handle as many &lt;&lt;elseif clauses as we find</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                <span class="keywordflow">while</span> (p.<a class="code" href="a00143.html#afaa7e96d4cdaf6b1fde9ecd273c00c34">NextSymbolsAre</a>(<a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.BeginCommand, <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.ElseIf)) {</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                    var elseIfClause = <span class="keyword">new</span> <a class="code" href="a00044.html">Clause</a>();</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                    <span class="comment">// Parse the syntax for this clause&#39;s condition</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                    p.ExpectSymbol(TokenType.BeginCommand);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                    p.ExpectSymbol(TokenType.ElseIf);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                    elseIfClause.expression = Expression.Parse(<span class="keyword">this</span>, p);</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                    p.ExpectSymbol(TokenType.EndCommand);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                    <span class="comment">// Read statements until we hit an &lt;&lt;endif, &lt;&lt;else or another &lt;&lt;elseif</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                    var clauseStatements = <span class="keyword">new</span> List&lt;Statement&gt;();</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                    <span class="keywordflow">while</span> (p.<a class="code" href="a00143.html#afaa7e96d4cdaf6b1fde9ecd273c00c34">NextSymbolsAre</a>(<a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.BeginCommand, <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.EndIf) == <span class="keyword">false</span> &amp;&amp;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                        p.NextSymbolsAre(TokenType.BeginCommand, TokenType.Else) == <span class="keyword">false</span> &amp;&amp;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                        p.<a class="code" href="a00143.html#afaa7e96d4cdaf6b1fde9ecd273c00c34">NextSymbolsAre</a>(<a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.BeginCommand, <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.ElseIf) == <span class="keyword">false</span>) {</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                        clauseStatements.Add(<span class="keyword">new</span> <a class="code" href="a00160.html">Statement</a>(<span class="keyword">this</span>, p));</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                        <span class="comment">// Ignore any dedents</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                        <span class="keywordflow">while</span> (p.<a class="code" href="a00143.html#a666a945da1a7845b02b92592fccac291">NextSymbolIs</a>(<a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.Dedent)) {</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                            p.ExpectSymbol(TokenType.Dedent);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                        }</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                    }</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                    elseIfClause.statements = clauseStatements;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                    clauses.Add(elseIfClause);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                }</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                <span class="comment">// Handle &lt;&lt;else&gt;&gt; if we have it</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                <span class="keywordflow">if</span> (p.<a class="code" href="a00143.html#afaa7e96d4cdaf6b1fde9ecd273c00c34">NextSymbolsAre</a>(<a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.BeginCommand, <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.Else, <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.EndCommand)) {</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                    <span class="comment">// parse the syntax (no expression this time, just &quot;&lt;&lt;else&gt;&gt;&quot;</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                    p.ExpectSymbol(TokenType.BeginCommand);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                    p.ExpectSymbol(TokenType.Else);</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                    p.ExpectSymbol(TokenType.EndCommand);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                    <span class="comment">// and parse statements until we hit &quot;&lt;&lt;endif&quot;</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                    var elseClause = <span class="keyword">new</span> <a class="code" href="a00044.html">Clause</a>();</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                    var clauseStatements = <span class="keyword">new</span> List&lt;Statement&gt;();</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                    <span class="keywordflow">while</span> (p.<a class="code" href="a00143.html#afaa7e96d4cdaf6b1fde9ecd273c00c34">NextSymbolsAre</a>(<a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.BeginCommand, <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.EndIf) == <span class="keyword">false</span>) {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                        clauseStatements.Add(<span class="keyword">new</span> <a class="code" href="a00160.html">Statement</a>(<span class="keyword">this</span>, p));</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                    }</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                    elseClause.statements = clauseStatements;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                    this.clauses.Add(elseClause);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                    <span class="comment">// Ignore any dedents</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                    <span class="keywordflow">while</span> (p.<a class="code" href="a00143.html#a666a945da1a7845b02b92592fccac291">NextSymbolIs</a>(<a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.Dedent)) {</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                        p.ExpectSymbol(TokenType.Dedent);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                    }</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                }</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                <span class="comment">// Finish up by reading the &lt;&lt;endif&gt;&gt;</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                p.ExpectSymbol(TokenType.BeginCommand);</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                p.ExpectSymbol(TokenType.EndIf);</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                p.ExpectSymbol(TokenType.EndCommand);</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            }</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;</div>
<div class="line"><a name="l00651"></a><span class="lineno"><a class="line" href="a00112.html#a5494c1daef8e0f3ac3ab68f91db4f332">  651</a></span>&#160;            <span class="keyword">internal</span> <span class="keyword">override</span> <span class="keywordtype">string</span> <a class="code" href="a00112.html#a5494c1daef8e0f3ac3ab68f91db4f332">PrintTree</a> (<span class="keywordtype">int</span> indentLevel)</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;            {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                var sb = <span class="keyword">new</span> StringBuilder ();</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                var first = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                <span class="keywordflow">foreach</span> (var clause <span class="keywordflow">in</span> <a class="code" href="a00112.html#a679b1a21582c78ed06df36bccc9c3cbc">clauses</a>) {</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                    <span class="keywordflow">if</span> (first) {</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                        sb.Append (<a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a> (indentLevel, <span class="stringliteral">&quot;If:&quot;</span>));</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                        first = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (clause.expression != null) {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                        sb.Append (<a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a> (indentLevel, <span class="stringliteral">&quot;Else If:&quot;</span>));</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                        sb.Append (<a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a> (indentLevel, <span class="stringliteral">&quot;Else:&quot;</span>));</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                    }</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                    sb.Append (clause.PrintTree (indentLevel + 1));</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                }</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                <span class="keywordflow">return</span> sb.ToString ();</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            }</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        }</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <span class="comment">// A value, which forms part of an expression.</span></div>
<div class="line"><a name="l00672"></a><span class="lineno"><a class="line" href="a00182.html">  672</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="a00182.html">ValueNode</a> : <a class="code" href="a00142.html">ParseNode</a> {</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div>
<div class="line"><a name="l00674"></a><span class="lineno"><a class="line" href="a00182.html#a51ab5939344f9bfa21181c02cf0e341d">  674</a></span>&#160;            <span class="keyword">public</span> <a class="code" href="a00181.html">Value</a> <a class="code" href="a00182.html#a51ab5939344f9bfa21181c02cf0e341d">value</a> { <span class="keyword">get</span>; <span class="keyword">private</span> set;}</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div>
<div class="line"><a name="l00676"></a><span class="lineno"><a class="line" href="a00182.html#a7be6a979ee21b2d07ce541fb9c5b52df">  676</a></span>&#160;            <span class="keyword">private</span> <span class="keywordtype">void</span> <a class="code" href="a00182.html#a7be6a979ee21b2d07ce541fb9c5b52df">UseToken</a>(<a class="code" href="a00167.html">Token</a> t) {</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                <span class="comment">// Store the value depending on token&#39;s type</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                <span class="keywordflow">switch</span> (t.<a class="code" href="a00167.html#a471a25da67fda0524f2375f9a882aafa">type</a>) {</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                <span class="keywordflow">case</span> TokenType.Number:</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                    <a class="code" href="a00182.html#a51ab5939344f9bfa21181c02cf0e341d">value</a> = <span class="keyword">new</span> <a class="code" href="a00181.html">Value</a> (<span class="keywordtype">float</span>.<a class="code" href="a00143.html#a811cc7226f4f4a2f3440cdb67ad14468">Parse</a> (t.<a class="code" href="a00167.html#a3df6b32d6190a639619a3f064c2154e2">value</a> as <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeacea27118326006d3829667a400ad23d5d98">String</a>));</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                <span class="keywordflow">case</span> TokenType.String:</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                    <a class="code" href="a00182.html#a51ab5939344f9bfa21181c02cf0e341d">value</a> = <span class="keyword">new</span> <a class="code" href="a00181.html">Value</a> (t.<a class="code" href="a00167.html#a3df6b32d6190a639619a3f064c2154e2">value</a> as String);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                <span class="keywordflow">case</span> TokenType.False:</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                    <a class="code" href="a00182.html#a51ab5939344f9bfa21181c02cf0e341d">value</a> = <span class="keyword">new</span> <a class="code" href="a00181.html">Value</a> (<span class="keyword">false</span>);</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                <span class="keywordflow">case</span> TokenType.True:</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                    <a class="code" href="a00182.html#a51ab5939344f9bfa21181c02cf0e341d">value</a> = <span class="keyword">new</span> <a class="code" href="a00181.html">Value</a> (<span class="keyword">true</span>);</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                <span class="keywordflow">case</span> TokenType.Variable:</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                    <a class="code" href="a00182.html#a51ab5939344f9bfa21181c02cf0e341d">value</a> = <span class="keyword">new</span> <a class="code" href="a00181.html">Value</a> ();</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                    value.type = Value.Type.Variable;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                    value.variableName = t.value as <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeacea27118326006d3829667a400ad23d5d98">String</a>;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                <span class="keywordflow">case</span> TokenType.Null:</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                    <a class="code" href="a00182.html#a51ab5939344f9bfa21181c02cf0e341d">value</a> = <a class="code" href="a00181.html#a1ed2964965baca8621c45efa23f37660">Value.NULL</a>;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                    <span class="keywordflow">throw</span> ParseException.Make (t, <span class="stringliteral">&quot;Invalid token type &quot;</span> + t.ToString ());</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                }</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;            }</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            <span class="comment">// Use a provided token</span></div>
<div class="line"><a name="l00713"></a><span class="lineno"><a class="line" href="a00182.html#afeaea21eee1c8360a76a202a419d3912">  713</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00182.html#afeaea21eee1c8360a76a202a419d3912">ValueNode</a>(<a class="code" href="a00142.html">ParseNode</a> <a class="code" href="a00142.html#af313a82103fcc2ff5a177dbb06b92f7b">parent</a>, <a class="code" href="a00167.html">Token</a> t, <a class="code" href="a00143.html">Parser</a> p) : base (parent, p) {</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                <a class="code" href="a00182.html#a7be6a979ee21b2d07ce541fb9c5b52df">UseToken</a>(t);</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;            }</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;            <span class="comment">// Read a number or a variable name from the parser</span></div>
<div class="line"><a name="l00718"></a><span class="lineno"><a class="line" href="a00182.html#ac63fbe99131dc3b42af16a2d087c0655">  718</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00182.html#ac63fbe99131dc3b42af16a2d087c0655">ValueNode</a>(<a class="code" href="a00142.html">ParseNode</a> <a class="code" href="a00142.html#af313a82103fcc2ff5a177dbb06b92f7b">parent</a>, <a class="code" href="a00143.html">Parser</a> p) : base(parent, p) {</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                <a class="code" href="a00167.html">Token</a> t = p.ExpectSymbol(TokenType.Number, TokenType.Variable, TokenType.String);</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                <a class="code" href="a00182.html#a7be6a979ee21b2d07ce541fb9c5b52df">UseToken</a>(t);</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;            }</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div>
<div class="line"><a name="l00725"></a><span class="lineno"><a class="line" href="a00182.html#ae4659e4431e9846a45e0d048c960781a">  725</a></span>&#160;            <span class="keyword">internal</span> <span class="keyword">override</span> <span class="keywordtype">string</span> <a class="code" href="a00182.html#ae4659e4431e9846a45e0d048c960781a">PrintTree</a> (<span class="keywordtype">int</span> indentLevel)</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;            {</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                <span class="keywordflow">switch</span> (<a class="code" href="a00182.html#a51ab5939344f9bfa21181c02cf0e341d">value</a>.<a class="code" href="a00181.html#a6d5820fafa766911b9da84d1ed33e51a">type</a>) {</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                <span class="keywordflow">case</span> Value.Type.Number:</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a> (indentLevel, <a class="code" href="a00182.html#a51ab5939344f9bfa21181c02cf0e341d">value</a>.<a class="code" href="a00181.html#ae1892c1c7a8177537d1caa39a2e51da6">numberValue</a>.ToString());</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                <span class="keywordflow">case</span> Value.Type.String:</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a>(indentLevel, <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeacea27118326006d3829667a400ad23d5d98">String</a>.Format(<span class="stringliteral">&quot;\&quot;{0}\&quot;&quot;</span>, <a class="code" href="a00182.html#a51ab5939344f9bfa21181c02cf0e341d">value</a>.<a class="code" href="a00181.html#add1b07146f1a9e4b655b33c93d07dff9">stringValue</a>));</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                <span class="keywordflow">case</span> Value.Type.Bool:</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a> (indentLevel, <a class="code" href="a00182.html#a51ab5939344f9bfa21181c02cf0e341d">value</a>.<a class="code" href="a00181.html#acb140e3466e132528409d4c441fd67da">boolValue</a>.ToString());</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                <span class="keywordflow">case</span> Value.Type.Variable:</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a> (indentLevel, <a class="code" href="a00182.html#a51ab5939344f9bfa21181c02cf0e341d">value</a>.<a class="code" href="a00181.html#a8ee2b09b7d28eaf97bf63c74d0023bfd">variableName</a>);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                <span class="keywordflow">case</span> Value.Type.Null:</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a> (indentLevel, <span class="stringliteral">&quot;(null)&quot;</span>);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                }</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentException ();</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;            }</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        }</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        <span class="comment">// Expressions are things like &quot;1 + 2 * 5 / 2 - 1&quot;</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        <span class="comment">// Expression = Expression Operator Expression</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        <span class="comment">// Expression = Identifier ( Expression [, Expression]* )</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <span class="comment">// Expression = Value</span></div>
<div class="line"><a name="l00747"></a><span class="lineno"><a class="line" href="a00098.html">  747</a></span>&#160;        <span class="keyword">internal</span> <span class="keyword">class </span><a class="code" href="a00098.html">Expression</a> : <a class="code" href="a00142.html">ParseNode</a> {</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;</div>
<div class="line"><a name="l00749"></a><span class="lineno"><a class="line" href="a00098.html#aceddb5496ccffe668bced2d131e4bf86">  749</a></span>&#160;            <span class="keyword">internal</span> <span class="keyword">enum</span> <a class="code" href="a00098.html#aceddb5496ccffe668bced2d131e4bf86">Type</a> {</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                <a class="code" href="a00098.html#aceddb5496ccffe668bced2d131e4bf86a689202409e48743b914713f96d93947c">Value</a>,</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                <a class="code" href="a00098.html#aceddb5496ccffe668bced2d131e4bf86affb017548928ab2305e7c55cb67c04ca">FunctionCall</a></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            }</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div>
<div class="line"><a name="l00754"></a><span class="lineno"><a class="line" href="a00098.html#ad55c92df835006328bc2a79a8f91efb9">  754</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00098.html#aceddb5496ccffe668bced2d131e4bf86">Type</a> <a class="code" href="a00098.html#ad55c92df835006328bc2a79a8f91efb9">type</a>;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;</div>
<div class="line"><a name="l00756"></a><span class="lineno"><a class="line" href="a00098.html#a569e516782891544c334ff8131b23108">  756</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00182.html">ValueNode</a> <a class="code" href="a00098.html#a569e516782891544c334ff8131b23108">value</a>;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;            <span class="comment">// - or -</span></div>
<div class="line"><a name="l00758"></a><span class="lineno"><a class="line" href="a00098.html#a9c1859ce5ad4c86ded8dd0d61da61320">  758</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00100.html">FunctionInfo</a> <span class="keyword">function</span>;</div>
<div class="line"><a name="l00759"></a><span class="lineno"><a class="line" href="a00098.html#a7b21380bead8ae08b2cfc6594edab32c">  759</a></span>&#160;            <span class="keyword">internal</span> List&lt;Expression&gt; <a class="code" href="a00098.html#a7b21380bead8ae08b2cfc6594edab32c">parameters</a>;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div>
<div class="line"><a name="l00761"></a><span class="lineno"><a class="line" href="a00098.html#a17e5101d02b96d0071e7a0223e4daa3d">  761</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00098.html#a17e5101d02b96d0071e7a0223e4daa3d">Expression</a>(<a class="code" href="a00142.html">ParseNode</a> <a class="code" href="a00142.html#af313a82103fcc2ff5a177dbb06b92f7b">parent</a>, <a class="code" href="a00182.html">ValueNode</a> <a class="code" href="a00098.html#a569e516782891544c334ff8131b23108">value</a>, <a class="code" href="a00143.html">Parser</a> p) : base(parent, p) {</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                this.type = Type.Value;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                this.value = <a class="code" href="a00098.html#a569e516782891544c334ff8131b23108">value</a>;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;            }</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;</div>
<div class="line"><a name="l00766"></a><span class="lineno"><a class="line" href="a00098.html#a5047d9b3301d6c7367f8095267ea9b07">  766</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00098.html#a5047d9b3301d6c7367f8095267ea9b07">Expression</a>(<a class="code" href="a00142.html">ParseNode</a> <a class="code" href="a00142.html#af313a82103fcc2ff5a177dbb06b92f7b">parent</a>, <a class="code" href="a00100.html">FunctionInfo</a> <span class="keyword">function</span>, List&lt;Expression&gt; <a class="code" href="a00098.html#a7b21380bead8ae08b2cfc6594edab32c">parameters</a>, <a class="code" href="a00143.html">Parser</a> p) : base(parent, p) {</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                <a class="code" href="a00098.html#ad55c92df835006328bc2a79a8f91efb9">type</a> = Type.FunctionCall;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                this.function = <span class="keyword">function</span>;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                this.parameters = <a class="code" href="a00098.html#a7b21380bead8ae08b2cfc6594edab32c">parameters</a>;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;            }</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div>
<div class="line"><a name="l00772"></a><span class="lineno"><a class="line" href="a00098.html#a686da57aaf67d50d2832f9ee0028a979">  772</a></span>&#160;            <span class="keyword">internal</span> <span class="keyword">static</span> <a class="code" href="a00098.html">Expression</a> <a class="code" href="a00098.html#a686da57aaf67d50d2832f9ee0028a979">Parse</a>(<a class="code" href="a00142.html">ParseNode</a> <a class="code" href="a00142.html#af313a82103fcc2ff5a177dbb06b92f7b">parent</a>, <a class="code" href="a00143.html">Parser</a> p) {</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                <span class="comment">// Applies Djikstra&#39;s &quot;shunting-yard&quot; algorithm to convert the</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                <span class="comment">// stream of infix expressions into postfix notation; we then</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                <span class="comment">// build a tree of expressions from the result</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                <span class="comment">// https://en.wikipedia.org/wiki/Shunting-yard_algorithm</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                Queue&lt;Token&gt; _expressionRPN = <span class="keyword">new</span> Queue&lt;Token&gt; ();</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                var operatorStack = <span class="keyword">new</span> Stack&lt;Token&gt;();</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                <span class="comment">// used for keeping count of parameters for each function</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                var functionStack = <span class="keyword">new</span> Stack&lt;Token&gt; ();</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                var allValidTokenTypes = <span class="keyword">new</span> List&lt;TokenType&gt;(<a class="code" href="a00137.html#ad8a4bb1b46dbc3d1b7708e78a2d97e1c">Operator.OperatorTypes</a>);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                allValidTokenTypes.Add(TokenType.Number);</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                allValidTokenTypes.Add(TokenType.Variable);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                allValidTokenTypes.Add(TokenType.String);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                allValidTokenTypes.Add(TokenType.LeftParen);</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                allValidTokenTypes.Add(TokenType.RightParen);</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                allValidTokenTypes.Add(TokenType.Identifier);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                allValidTokenTypes.Add(TokenType.Comma);</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                allValidTokenTypes.Add(TokenType.True);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                allValidTokenTypes.Add(TokenType.False);</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;                allValidTokenTypes.Add(TokenType.Null);</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                <a class="code" href="a00167.html">Token</a> lastToken = null;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                <span class="comment">// Read all the contents of the expression</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;                <span class="keywordflow">while</span> (p.<a class="code" href="a00143.html#a1a4de646937057988b59d2ff8035eae3">tokens</a>.Count &gt; 0 &amp;&amp; p.<a class="code" href="a00143.html#a666a945da1a7845b02b92592fccac291">NextSymbolIs</a>(allValidTokenTypes.ToArray())) {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                    <a class="code" href="a00167.html">Token</a> nextToken = p.ExpectSymbol(allValidTokenTypes.ToArray());</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                    <span class="keywordflow">if</span> (nextToken.<a class="code" href="a00167.html#a471a25da67fda0524f2375f9a882aafa">type</a> == <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.Number ||</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                        nextToken.<a class="code" href="a00167.html#a471a25da67fda0524f2375f9a882aafa">type</a> == <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.Variable ||</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                        nextToken.<a class="code" href="a00167.html#a471a25da67fda0524f2375f9a882aafa">type</a> == <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.String ||</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                        nextToken.<a class="code" href="a00167.html#a471a25da67fda0524f2375f9a882aafa">type</a> == <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.True ||</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                        nextToken.<a class="code" href="a00167.html#a471a25da67fda0524f2375f9a882aafa">type</a> == <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.False ||</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                        nextToken.<a class="code" href="a00167.html#a471a25da67fda0524f2375f9a882aafa">type</a> == <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.Null) {</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                        <span class="comment">// Primitive values go straight onto the output</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                        _expressionRPN.Enqueue (nextToken);</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nextToken.<a class="code" href="a00167.html#a471a25da67fda0524f2375f9a882aafa">type</a> == <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.Identifier) {</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                        operatorStack.Push (nextToken);</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                        functionStack.Push (nextToken);</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                        <span class="comment">// next token must be a left paren, so process that immediately</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                        nextToken = p.ExpectSymbol (TokenType.LeftParen);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;                        <span class="comment">// enter that sub-expression</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                        operatorStack.Push (nextToken);</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nextToken.<a class="code" href="a00167.html#a471a25da67fda0524f2375f9a882aafa">type</a> == <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.Comma) {</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                        <span class="comment">// Resolve this sub-expression before moving on to the</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                        <span class="comment">// next parameter</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                        <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                            <span class="comment">// pop operators until we reach a left paren</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                            <span class="keywordflow">while</span> (operatorStack.Peek().type != TokenType.LeftParen) {</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                                _expressionRPN.Enqueue(operatorStack.Pop());</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                            }</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                        } <span class="keywordflow">catch</span> (InvalidOperationException) {</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                            <span class="comment">// we reached the end of the stack prematurely</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                            <span class="comment">// this means unbalanced parens!</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                            <span class="keywordflow">throw</span> ParseException.Make(nextToken, <span class="stringliteral">&quot;Error parsing expression: &quot;</span> +</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                                <span class="stringliteral">&quot;unbalanced parentheses&quot;</span>);</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                        }</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                        <span class="comment">// We expect the top of the stack to now contain the left paren that</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                        <span class="comment">// began the list of parameters</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                        <span class="keywordflow">if</span> (operatorStack.Peek().type != TokenType.LeftParen) {</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                            <span class="keywordflow">throw</span> ParseException.Make (operatorStack.Peek (), <span class="stringliteral">&quot;Expression parser got &quot;</span> +</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                                <span class="stringliteral">&quot;confused dealing with a function&quot;</span>);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                        }</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                        <span class="comment">// The next token is not allowed to be a right-paren or a comma</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                        <span class="comment">// (that is, you can&#39;t say &quot;foo(2,,)&quot;)</span></div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;                        <span class="keywordflow">if</span> (p.<a class="code" href="a00143.html#a666a945da1a7845b02b92592fccac291">NextSymbolIs</a>(<a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.RightParen, <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.Comma)) {</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                            <span class="keywordflow">throw</span> ParseException.Make (p.tokens.Peek(), <span class="stringliteral">&quot;Expected expression&quot;</span>);</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                        }</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;                        <span class="comment">// Find the closest function on the stack</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                        <span class="comment">// and increment the number of parameters</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                        functionStack.Peek().parameterCount++;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="a00137.html">Operator</a>.<a class="code" href="a00137.html#a77a9edf71f86263e1695869e69505007">IsOperator</a>(nextToken.<a class="code" href="a00167.html#a471a25da67fda0524f2375f9a882aafa">type</a>)) {</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                        <span class="comment">// This is an operator</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                        <span class="comment">// If this is a Minus, we need to determine if it&#39;s a</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                        <span class="comment">// unary minus or a binary minus.</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                        <span class="comment">// Unary minus looks like this: &quot;-1&quot;</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                        <span class="comment">// Binary minus looks like this: &quot;2 - 3&quot;</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                        <span class="comment">// Things get complex when we say stuff like &quot;1 + -1&quot;.</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                        <span class="comment">// But it&#39;s easier when we realise that a minus</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                        <span class="comment">// is ONLY unary when the last token was a left paren,</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                        <span class="comment">// an operator, or it&#39;s the first token.</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                        <span class="keywordflow">if</span> (nextToken.<a class="code" href="a00167.html#a471a25da67fda0524f2375f9a882aafa">type</a> == <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.Minus) {</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                            <span class="keywordflow">if</span> (lastToken == null ||</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                                lastToken.type == <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.LeftParen ||</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                                <a class="code" href="a00137.html">Operator</a>.<a class="code" href="a00137.html#a77a9edf71f86263e1695869e69505007">IsOperator</a>(lastToken.type)) {</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                                <span class="comment">// This is actually a unary minus.</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;                                nextToken.type = TokenType.UnaryMinus;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                            }</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                        }</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                        <span class="comment">// We cannot assign values inside an expression. That is,</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                        <span class="comment">// saying &quot;$foo = 2&quot; in an express does not assign $foo to 2</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                        <span class="comment">// and then evaluate to 2. Instead, Yarn defines this</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                        <span class="comment">// to mean &quot;$foo == 2&quot;</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;                        <span class="keywordflow">if</span> (nextToken.<a class="code" href="a00167.html#a471a25da67fda0524f2375f9a882aafa">type</a> == <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.EqualToOrAssign) {</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                            nextToken.type = TokenType.EqualTo;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                        }</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                        <span class="comment">// O1 = this operator</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                        <span class="comment">// O2 = the token at the top of the stack</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                        <span class="comment">// While O2 is an operator, and EITHER: 1. O1 is left-associative and</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                        <span class="comment">// has precedence &lt;= O2, or 2. O1 is right-associative and</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                        <span class="comment">// has precedence &gt; O2:</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;                        <span class="keywordflow">while</span> (<a class="code" href="a00098.html#a5004a8eaa00b2b55856ecb4f339033fb">ShouldApplyPrecedence</a>(nextToken.<a class="code" href="a00167.html#a471a25da67fda0524f2375f9a882aafa">type</a>, operatorStack)) {</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                            var o = operatorStack.Pop();</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                            _expressionRPN.Enqueue(o);</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                        }</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                        operatorStack.Push(nextToken);</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nextToken.<a class="code" href="a00167.html#a471a25da67fda0524f2375f9a882aafa">type</a> == <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.LeftParen) {</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                        <span class="comment">// Record that we have entered a paren-delimited</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                        <span class="comment">// subexpression</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                        operatorStack.Push(nextToken);</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nextToken.<a class="code" href="a00167.html#a471a25da67fda0524f2375f9a882aafa">type</a> == <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.RightParen) {</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                        <span class="comment">// We&#39;re leaving a subexpression; time to resolve the</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                        <span class="comment">// order of operations that we saw in between the parens.</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                        <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                            <span class="comment">// pop operators until we reach a left paren</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                            <span class="keywordflow">while</span> (operatorStack.Peek().type != TokenType.LeftParen) {</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                                _expressionRPN.Enqueue(operatorStack.Pop());</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                            }</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                            <span class="comment">// pop the left paren</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                            operatorStack.Pop();</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                        } <span class="keywordflow">catch</span> (InvalidOperationException) {</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                            <span class="comment">// we reached the end of the stack prematurely</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                            <span class="comment">// this means unbalanced parens!</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                            <span class="keywordflow">throw</span> ParseException.Make(nextToken, <span class="stringliteral">&quot;Error parsing expression: unbalanced parentheses&quot;</span>);</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                        }</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                        <span class="keywordflow">if</span> (operatorStack.Peek().type == TokenType.Identifier) {</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                            <span class="comment">// This whole paren-delimited subexpression is actually</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                            <span class="comment">// a function call</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                            <span class="comment">// If the last token was a left-paren, then this</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                            <span class="comment">// was a function with no parameters; otherwise, we</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                            <span class="comment">// have an additional parameter (on top of the ones we counted</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                            <span class="comment">// while encountering commas)</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                            <span class="keywordflow">if</span> (lastToken.type != <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.LeftParen) {</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                                functionStack.Peek ().parameterCount++;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                            }</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                            _expressionRPN.Enqueue(operatorStack.Pop());</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                            functionStack.Pop ();</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                        }</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;                    }</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                    <span class="comment">// Record this as the last token we saw; we&#39;ll use</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                    <span class="comment">// this to figure out if minuses are unary or not</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                    lastToken = nextToken;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                }</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                <span class="comment">// No more tokens; pop all operators onto the output queue</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                <span class="keywordflow">while</span> (operatorStack.Count &gt; 0) {</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                    _expressionRPN.Enqueue(operatorStack.Pop());</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                }</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;                <span class="comment">// If the output queue is empty, then this is not an expression</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                <span class="keywordflow">if</span> (_expressionRPN.Count == 0) {</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="a00141.html">ParseException</a> (<span class="stringliteral">&quot;Error parsing expression: no expression found!&quot;</span>);</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                }</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                <span class="comment">// We&#39;ve now got this in more easily parsed RPN form;</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                <span class="comment">// time to build the expression tree.</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;                <a class="code" href="a00167.html">Token</a> firstToken = _expressionRPN.Peek();</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                var evaluationStack = <span class="keyword">new</span> Stack&lt;Expression&gt;();</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                <span class="keywordflow">while</span> (_expressionRPN.Count &gt; 0) {</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                    var next = _expressionRPN.Dequeue();</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="a00137.html">Operator</a>.<a class="code" href="a00137.html#a77a9edf71f86263e1695869e69505007">IsOperator</a>(next.type)) {</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                        <span class="comment">// This is an operation</span></div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                        var info = Operator.InfoForOperator(next.type);</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                        <span class="keywordflow">if</span> (evaluationStack.Count &lt; info.arguments) {</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                            <span class="keywordflow">throw</span> ParseException.Make(next, <span class="stringliteral">&quot;Error parsing expression: not enough &quot;</span> +</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                                <span class="stringliteral">&quot;arguments for operator &quot;</span>+next.type.ToString());</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                        }</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                        var <a class="code" href="a00098.html#a7b21380bead8ae08b2cfc6594edab32c">parameters</a> = <span class="keyword">new</span> List&lt;Expression&gt; ();</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; info.arguments; i++) {</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                            parameters.Add (evaluationStack.Pop ());</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                        }</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                        parameters.Reverse ();</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                        var operatorFunc = p.library.GetFunction (next.type.ToString());</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                        var expr = <span class="keyword">new</span> <a class="code" href="a00098.html#a17e5101d02b96d0071e7a0223e4daa3d">Expression</a> (parent, operatorFunc, parameters, p);</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                        evaluationStack.Push(expr);</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (next.type == <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.Identifier) {</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                        <span class="comment">// This is a function call</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                        <a class="code" href="a00100.html">FunctionInfo</a> info = null;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                        <span class="comment">// If we have a library, use it to check if the</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                        <span class="comment">// number of parameters provided is correct</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                        <span class="keywordflow">if</span> (p.<a class="code" href="a00143.html#a1313951b09177a1c83b6cf035139197a">library</a> != null) {</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                            info = p.library.GetFunction(next.value as <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeacea27118326006d3829667a400ad23d5d98">String</a>);</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                            <span class="comment">// Ensure that this call has the right number of params</span></div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                            <span class="keywordflow">if</span> (info.<a class="code" href="a00100.html#a1ed09ff8aafa230a0d2bbc23cd6cd763">IsParameterCountCorrect</a>(next.parameterCount) == <span class="keyword">false</span>) {</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                                <span class="keywordtype">string</span> error = string.Format(<span class="stringliteral">&quot;Error parsing expression: &quot;</span> +</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                                    <span class="stringliteral">&quot;Unsupported number of parameters for function {0} (expected {1}, got {2})&quot;</span>,</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                                    next.value as <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeacea27118326006d3829667a400ad23d5d98">String</a>,</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;                                    info.paramCount,</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;                                    next.parameterCount</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                                );</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                                <span class="keywordflow">throw</span> ParseException.Make(next, error);</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;                            }</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                            <span class="comment">// Use a dummy FunctionInfo to represent info about the</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;                            <span class="comment">// fact that a function is called; note that</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;                            <span class="comment">// attempting to call this will fail</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                            info = <span class="keyword">new</span> <a class="code" href="a00100.html">FunctionInfo</a> (next.value, next.parameterCount, (<a class="code" href="a00045.html#ae0be2e5cf13d5779816102439e61ff1a">Function</a>)null);</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;                        }</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;                        var parameterList = <span class="keyword">new</span> List&lt;Expression&gt; ();</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; next.parameterCount; i++) {</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                            parameterList.Add (evaluationStack.Pop());</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                        }</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                        parameterList.Reverse ();</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                        var expr = <span class="keyword">new</span> <a class="code" href="a00098.html#a17e5101d02b96d0071e7a0223e4daa3d">Expression</a> (parent, info, parameterList, p);</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                        evaluationStack.Push (expr);</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;                        <span class="comment">// This is a raw value</span></div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;                        var v = <span class="keyword">new</span> <a class="code" href="a00182.html">ValueNode</a>(parent, next, p);</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                        <a class="code" href="a00098.html">Expression</a> expr = <span class="keyword">new</span> <a class="code" href="a00098.html#a17e5101d02b96d0071e7a0223e4daa3d">Expression</a>(parent, v, p);</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;                        evaluationStack.Push(expr);</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                    }</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                }</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;                <span class="comment">// We should now have a single expression in this stack, which is the root</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                <span class="comment">// of the expression&#39;s tree. If we have more than one, then we have a problem.</span></div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;                <span class="keywordflow">if</span> (evaluationStack.Count != 1) {</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;                    <span class="keywordflow">throw</span> ParseException.Make(firstToken, <span class="stringliteral">&quot;Error parsing expression &quot;</span> +</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;                        <span class="stringliteral">&quot;(stack did not reduce correctly)&quot;</span>);</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                }</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                <span class="comment">// Return it</span></div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                <span class="keywordflow">return</span> evaluationStack.Pop ();</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;            }</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;            <span class="comment">// Used to determine whether the shunting-yard algorithm should pop operators from</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;            <span class="comment">// the operator stack.</span></div>
<div class="line"><a name="l01046"></a><span class="lineno"><a class="line" href="a00098.html#a5004a8eaa00b2b55856ecb4f339033fb"> 1046</a></span>&#160;            <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="a00098.html#a5004a8eaa00b2b55856ecb4f339033fb">ShouldApplyPrecedence</a>(<a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a> o1, Stack&lt;Token&gt; operatorStack) {</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                <span class="keywordflow">if</span> (operatorStack.Count == 0) {</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;                }</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="a00137.html">Operator</a>.<a class="code" href="a00137.html#a77a9edf71f86263e1695869e69505007">IsOperator</a> (o1) == <span class="keyword">false</span>) {</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="a00141.html">ParseException</a> (<span class="stringliteral">&quot;Internal error parsing expression&quot;</span>);</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                }</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a> o2 = operatorStack.Peek ().<a class="code" href="a00098.html#ad55c92df835006328bc2a79a8f91efb9">type</a>;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="a00137.html">Operator</a>.<a class="code" href="a00137.html#a77a9edf71f86263e1695869e69505007">IsOperator</a> (o2) == <span class="keyword">false</span>)</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;                var o1Info = Operator.InfoForOperator (o1);</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                var o2Info = Operator.InfoForOperator (o2);</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                <span class="keywordflow">if</span> (o1Info.associativity == <a class="code" href="a00137.html">Operator</a>.<a class="code" href="a00137.html#a83fa1b8db0e6678006920812b6f33f62">Associativity</a>.Left &amp;&amp; o1Info.precedence &lt;= o2Info.precedence) {</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                }</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                <span class="keywordflow">if</span> (o1Info.associativity == <a class="code" href="a00137.html">Operator</a>.<a class="code" href="a00137.html#a83fa1b8db0e6678006920812b6f33f62">Associativity</a>.Right &amp;&amp; o1Info.precedence &lt; o2Info.precedence) {</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                }</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;            }</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;</div>
<div class="line"><a name="l01073"></a><span class="lineno"><a class="line" href="a00098.html#a509ba6d93218203bae56a5a7a82e8261"> 1073</a></span>&#160;            <span class="keyword">internal</span> <span class="keyword">override</span> <span class="keywordtype">string</span> <a class="code" href="a00098.html#a509ba6d93218203bae56a5a7a82e8261">PrintTree</a> (<span class="keywordtype">int</span> indentLevel)</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;            {</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                var stringBuilder = <span class="keyword">new</span> StringBuilder ();</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;                <span class="keywordflow">switch</span> (<a class="code" href="a00098.html#ad55c92df835006328bc2a79a8f91efb9">type</a>) {</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;                <span class="keywordflow">case</span> Type.Value:</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;                    <span class="keywordflow">return</span> value.PrintTree (indentLevel);</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                <span class="keywordflow">case</span> Type.FunctionCall:</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="a00098.html#a7b21380bead8ae08b2cfc6594edab32c">parameters</a>.Count == 0) {</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                        stringBuilder.Append(<a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a>(indentLevel, <span class="stringliteral">&quot;Function call to &quot;</span> + <span class="keyword">function</span>.name + <span class="stringliteral">&quot; (no parameters)&quot;</span>));</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                        stringBuilder.Append(<a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a>(indentLevel, <span class="stringliteral">&quot;Function call to &quot;</span> + <span class="keyword">function</span>.name + <span class="stringliteral">&quot; (&quot;</span> +<a class="code" href="a00098.html#a7b21380bead8ae08b2cfc6594edab32c">parameters</a>.Count+<span class="stringliteral">&quot; parameters) {&quot;</span>));</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                        <span class="keywordflow">foreach</span> (var param <span class="keywordflow">in</span> <a class="code" href="a00098.html#a7b21380bead8ae08b2cfc6594edab32c">parameters</a>) {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                            stringBuilder.Append(param.PrintTree(indentLevel+1));</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                        }</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                        stringBuilder.Append(<a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a>(indentLevel, <span class="stringliteral">&quot;}&quot;</span>));</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                    }</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                    <span class="keywordflow">return</span> stringBuilder.ToString();</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                }</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a>(indentLevel, <span class="stringliteral">&quot;&lt;error printing expression!&gt;&quot;</span>);</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;            }</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        }</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        <span class="comment">// AssignmentStatements are things like &lt;&lt;set $foo = 1&gt;&gt;</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        <span class="comment">// AssignmentStatement = BeginCommand Set &lt;variable&gt; &lt;operation&gt; Expression EndCommand</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"><a class="line" href="a00033.html"> 1100</a></span>&#160;        <span class="keyword">internal</span> <span class="keyword">class </span><a class="code" href="a00033.html">AssignmentStatement</a> : <a class="code" href="a00142.html">ParseNode</a> {</div>
<div class="line"><a name="l01101"></a><span class="lineno"><a class="line" href="a00033.html#a4f021e4c835e429ed5b5bb504a5acf39"> 1101</a></span>&#160;            <span class="keyword">internal</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="a00033.html#a4f021e4c835e429ed5b5bb504a5acf39">CanParse</a> (<a class="code" href="a00143.html">Parser</a> p)</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;            {</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;                <span class="keywordflow">return</span> p.NextSymbolsAre (TokenType.BeginCommand, TokenType.Set);</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;            }</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div>
<div class="line"><a name="l01106"></a><span class="lineno"><a class="line" href="a00033.html#a4e764622b716a4138d1fd9e005c41336"> 1106</a></span>&#160;            <span class="keyword">internal</span> <span class="keywordtype">string</span> <a class="code" href="a00033.html#a4e764622b716a4138d1fd9e005c41336">destinationVariableName</a> { <span class="keyword">get</span>; <span class="keyword">private</span> set; }</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;</div>
<div class="line"><a name="l01108"></a><span class="lineno"><a class="line" href="a00033.html#a7ada366012cacd98436db80227ee65f5"> 1108</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00098.html">Expression</a> <a class="code" href="a00033.html#a7ada366012cacd98436db80227ee65f5">valueExpression</a> { <span class="keyword">get</span>; <span class="keyword">private</span> set; }</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;</div>
<div class="line"><a name="l01110"></a><span class="lineno"><a class="line" href="a00033.html#a896df0f23b44e9f20036150b3527d9e5"> 1110</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a> <a class="code" href="a00033.html#a896df0f23b44e9f20036150b3527d9e5">operation</a> { <span class="keyword">get</span>; <span class="keyword">private</span> set; }</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;</div>
<div class="line"><a name="l01112"></a><span class="lineno"><a class="line" href="a00033.html#af3d393da2f684272251805d3471b6c7a"> 1112</a></span>&#160;            <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>[] <a class="code" href="a00033.html#af3d393da2f684272251805d3471b6c7a">validOperators</a> = {</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;                TokenType.EqualToOrAssign,</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;                TokenType.AddAssign,</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;                TokenType.MinusAssign,</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;                TokenType.DivideAssign,</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                TokenType.MultiplyAssign</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;            };</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;</div>
<div class="line"><a name="l01120"></a><span class="lineno"><a class="line" href="a00033.html#a34d41e545770d5f41542253d0bb4f8b3"> 1120</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00033.html#a34d41e545770d5f41542253d0bb4f8b3">AssignmentStatement</a>(<a class="code" href="a00142.html">ParseNode</a> <a class="code" href="a00142.html#af313a82103fcc2ff5a177dbb06b92f7b">parent</a>, <a class="code" href="a00143.html">Parser</a> p) : base(parent, p) {</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                p.ExpectSymbol(TokenType.BeginCommand);</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                p.ExpectSymbol(TokenType.Set);</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;                <a class="code" href="a00033.html#a4e764622b716a4138d1fd9e005c41336">destinationVariableName</a> = p.ExpectSymbol(TokenType.Variable).value as <span class="keywordtype">string</span>;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;                <a class="code" href="a00033.html#a896df0f23b44e9f20036150b3527d9e5">operation</a> = p.ExpectSymbol(<a class="code" href="a00033.html#af3d393da2f684272251805d3471b6c7a">validOperators</a>).type;</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;                <a class="code" href="a00033.html#a7ada366012cacd98436db80227ee65f5">valueExpression</a> = Expression.Parse(<span class="keyword">this</span>, p);</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;                p.ExpectSymbol(TokenType.EndCommand);</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;            }</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;</div>
<div class="line"><a name="l01131"></a><span class="lineno"><a class="line" href="a00033.html#accb9ddcb472eb035a65188c857b8efd8"> 1131</a></span>&#160;            <span class="keyword">internal</span> <span class="keyword">override</span> <span class="keywordtype">string</span> <a class="code" href="a00033.html#accb9ddcb472eb035a65188c857b8efd8">PrintTree</a> (<span class="keywordtype">int</span> indentLevel)</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;            {</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;                var sb = <span class="keyword">new</span> StringBuilder ();</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;                sb.Append (<a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a>(indentLevel, <span class="stringliteral">&quot;Set:&quot;</span>));</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;                sb.Append (<a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a>(indentLevel+1, <a class="code" href="a00033.html#a4e764622b716a4138d1fd9e005c41336">destinationVariableName</a>));</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;                sb.Append (<a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a> (indentLevel+1,  <a class="code" href="a00033.html#a896df0f23b44e9f20036150b3527d9e5">operation</a>.ToString()));</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;                sb.Append (valueExpression.PrintTree (indentLevel + 1));</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                <span class="keywordflow">return</span> sb.ToString ();</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;            }</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;        }</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        <span class="comment">// Operators are used in expressions - things like + - / * != neq</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"><a class="line" href="a00137.html"> 1144</a></span>&#160;        <span class="keyword">internal</span> <span class="keyword">class </span><a class="code" href="a00137.html">Operator</a> : <a class="code" href="a00142.html">ParseNode</a> {</div>
<div class="line"><a name="l01145"></a><span class="lineno"><a class="line" href="a00137.html#ac2de2f59be0e69b316627a4de16fadd3"> 1145</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a> <a class="code" href="a00137.html#ac2de2f59be0e69b316627a4de16fadd3">operatorType</a> { <span class="keyword">get</span>; <span class="keyword">private</span> set; }</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;</div>
<div class="line"><a name="l01147"></a><span class="lineno"><a class="line" href="a00137.html#a83fa1b8db0e6678006920812b6f33f62"> 1147</a></span>&#160;            <span class="keyword">internal</span> <span class="keyword">enum</span> <a class="code" href="a00137.html#a83fa1b8db0e6678006920812b6f33f62">Associativity</a> {</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;                <a class="code" href="a00137.html#a83fa1b8db0e6678006920812b6f33f62a945d5e233cf7d6240f6b783b36a374ff">Left</a>, <span class="comment">// resolve leftmost operand first</span></div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;                <a class="code" href="a00137.html#a83fa1b8db0e6678006920812b6f33f62a92b09c7c48c520c3c55e497875da437c">Right</a>, <span class="comment">// resolve rightmost operand first</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;                <a class="code" href="a00137.html#a83fa1b8db0e6678006920812b6f33f62a6adf97f83acf6453d4a6a4b1070f3754">None</a> <span class="comment">// special-case (like &quot;(&quot;, &quot;)&quot;, &quot;,&quot;</span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;            }</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;            <span class="comment">// Info used during expression parsing</span></div>
<div class="line"><a name="l01154"></a><span class="lineno"><a class="line" href="a00138.html"> 1154</a></span>&#160;            <span class="keyword">internal</span> <span class="keyword">struct </span><a class="code" href="a00138.html">OperatorInfo</a> {</div>
<div class="line"><a name="l01155"></a><span class="lineno"><a class="line" href="a00138.html#accba40a72d9709ca3c18810b8661afe3"> 1155</a></span>&#160;                <span class="keyword">internal</span> <a class="code" href="a00137.html#a83fa1b8db0e6678006920812b6f33f62">Associativity</a> <a class="code" href="a00138.html#accba40a72d9709ca3c18810b8661afe3">associativity</a>;</div>
<div class="line"><a name="l01156"></a><span class="lineno"><a class="line" href="a00138.html#a0b2921d7b863e268d33aa15213395093"> 1156</a></span>&#160;                <span class="keyword">internal</span> <span class="keywordtype">int</span> <a class="code" href="a00138.html#a0b2921d7b863e268d33aa15213395093">precedence</a>;</div>
<div class="line"><a name="l01157"></a><span class="lineno"><a class="line" href="a00138.html#a0758c6f7dac4b205f616b43b1af95b95"> 1157</a></span>&#160;                <span class="keyword">internal</span> <span class="keywordtype">int</span> <a class="code" href="a00138.html#a0758c6f7dac4b205f616b43b1af95b95">arguments</a>;</div>
<div class="line"><a name="l01158"></a><span class="lineno"><a class="line" href="a00138.html#a25faca62235c9f8542e4a071ba8ebc0b"> 1158</a></span>&#160;                <span class="keyword">internal</span> <a class="code" href="a00138.html#a25faca62235c9f8542e4a071ba8ebc0b">OperatorInfo</a>(<a class="code" href="a00137.html#a83fa1b8db0e6678006920812b6f33f62">Associativity</a> <a class="code" href="a00138.html#accba40a72d9709ca3c18810b8661afe3">associativity</a>, <span class="keywordtype">int</span> <a class="code" href="a00138.html#a0b2921d7b863e268d33aa15213395093">precedence</a>, <span class="keywordtype">int</span> <a class="code" href="a00138.html#a0758c6f7dac4b205f616b43b1af95b95">arguments</a>) {</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;                    this.associativity = <a class="code" href="a00138.html#accba40a72d9709ca3c18810b8661afe3">associativity</a>;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;                    this.precedence = <a class="code" href="a00138.html#a0b2921d7b863e268d33aa15213395093">precedence</a>;</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;                    this.arguments = <a class="code" href="a00138.html#a0758c6f7dac4b205f616b43b1af95b95">arguments</a>;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                }</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;            }</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;</div>
<div class="line"><a name="l01165"></a><span class="lineno"><a class="line" href="a00137.html#a871e7b4652c48f456647d3950ac37531"> 1165</a></span>&#160;            <span class="keyword">internal</span> <span class="keyword">static</span> <a class="code" href="a00138.html">OperatorInfo</a> <a class="code" href="a00137.html#a871e7b4652c48f456647d3950ac37531">InfoForOperator</a>(<a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a> op) {</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                <span class="keywordflow">if</span> (Array.IndexOf(<a class="code" href="a00137.html#ad8a4bb1b46dbc3d1b7708e78a2d97e1c">OperatorTypes</a>, op) == -1) {</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="a00141.html">ParseException</a> (op.ToString () + <span class="stringliteral">&quot; is not a valid operator&quot;</span>);</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                }</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                <span class="comment">// Determine the precendence, associativity and</span></div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;                <span class="comment">// number of operands that each operator has.</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                <span class="keywordflow">switch</span> (op) {</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                <span class="keywordflow">case</span> TokenType.Not:</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                <span class="keywordflow">case</span> TokenType.UnaryMinus:</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="a00138.html">OperatorInfo</a> (<a class="code" href="a00137.html#a83fa1b8db0e6678006920812b6f33f62">Associativity</a>.Right, 30, 1);</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;                <span class="keywordflow">case</span> TokenType.Multiply:</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                <span class="keywordflow">case</span> TokenType.Divide:</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                <span class="keywordflow">case</span> TokenType.Modulo:</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="a00138.html">OperatorInfo</a>(<a class="code" href="a00137.html#a83fa1b8db0e6678006920812b6f33f62">Associativity</a>.Left, 20,2);</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                <span class="keywordflow">case</span> TokenType.Add:</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                <span class="keywordflow">case</span> TokenType.Minus:</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="a00138.html">OperatorInfo</a>(<a class="code" href="a00137.html#a83fa1b8db0e6678006920812b6f33f62">Associativity</a>.Left, 15,2);</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                <span class="keywordflow">case</span> TokenType.GreaterThan:</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                <span class="keywordflow">case</span> TokenType.LessThan:</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                <span class="keywordflow">case</span> TokenType.GreaterThanOrEqualTo:</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                <span class="keywordflow">case</span> TokenType.LessThanOrEqualTo:</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="a00138.html">OperatorInfo</a>(<a class="code" href="a00137.html#a83fa1b8db0e6678006920812b6f33f62">Associativity</a>.Left, 10,2);</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;                <span class="keywordflow">case</span> TokenType.EqualTo:</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;                <span class="keywordflow">case</span> TokenType.EqualToOrAssign:</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                <span class="keywordflow">case</span> TokenType.NotEqualTo:</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="a00138.html">OperatorInfo</a>(<a class="code" href="a00137.html#a83fa1b8db0e6678006920812b6f33f62">Associativity</a>.Left, 5,2);</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;                <span class="keywordflow">case</span> TokenType.And:</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="a00138.html">OperatorInfo</a>(<a class="code" href="a00137.html#a83fa1b8db0e6678006920812b6f33f62">Associativity</a>.Left, 4,2);</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;                <span class="keywordflow">case</span> TokenType.Or:</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="a00138.html">OperatorInfo</a>(<a class="code" href="a00137.html#a83fa1b8db0e6678006920812b6f33f62">Associativity</a>.Left, 3,2);</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;                <span class="keywordflow">case</span> TokenType.Xor:</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="a00138.html">OperatorInfo</a>(<a class="code" href="a00137.html#a83fa1b8db0e6678006920812b6f33f62">Associativity</a>.Left, 2,2);</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                }</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException (<span class="stringliteral">&quot;Unknown operator &quot;</span> + op.ToString());</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;            }</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;</div>
<div class="line"><a name="l01206"></a><span class="lineno"><a class="line" href="a00137.html#a77a9edf71f86263e1695869e69505007"> 1206</a></span>&#160;            <span class="keyword">internal</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="a00137.html#a77a9edf71f86263e1695869e69505007">IsOperator</a>(<a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a> type) {</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;                <span class="keywordflow">return</span> Array.IndexOf (<a class="code" href="a00137.html#ad8a4bb1b46dbc3d1b7708e78a2d97e1c">OperatorTypes</a>, type) != -1;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;            }</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;            <span class="comment">// Valid types of operators.</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"><a class="line" href="a00137.html#ad8a4bb1b46dbc3d1b7708e78a2d97e1c"> 1211</a></span>&#160;            <span class="keyword">internal</span> <span class="keyword">static</span>  <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>[] <a class="code" href="a00137.html#ad8a4bb1b46dbc3d1b7708e78a2d97e1c">OperatorTypes</a> {</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;                <span class="keyword">get</span> {</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>[] {</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;                        TokenType.Not,</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;                        TokenType.UnaryMinus,</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;                        TokenType.Add,</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;                        TokenType.Minus,</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;                        TokenType.Divide,</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;                        TokenType.Multiply,</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;                        TokenType.Modulo,</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;                        TokenType.EqualToOrAssign,</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;                        TokenType.EqualTo,</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;                        TokenType.GreaterThan,</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;                        TokenType.GreaterThanOrEqualTo,</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;                        TokenType.LessThan,</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;                        TokenType.LessThanOrEqualTo,</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;                        TokenType.NotEqualTo,</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;                        TokenType.And,</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;                        TokenType.Or,</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;                        TokenType.Xor</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;                    };</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;                }</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;            }</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;</div>
<div class="line"><a name="l01240"></a><span class="lineno"><a class="line" href="a00137.html#a171027dbddf208784c824ae7fe72cb71"> 1240</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00137.html#a171027dbddf208784c824ae7fe72cb71">Operator</a>(<a class="code" href="a00142.html">ParseNode</a> <a class="code" href="a00142.html#af313a82103fcc2ff5a177dbb06b92f7b">parent</a>, <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a> t, <a class="code" href="a00143.html">Parser</a> p) : base(parent, p) {</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;                <a class="code" href="a00137.html#ac2de2f59be0e69b316627a4de16fadd3">operatorType</a> = t;</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;            }</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;</div>
<div class="line"><a name="l01244"></a><span class="lineno"><a class="line" href="a00137.html#a50f9f95cd7aefe2a601a7d5b5ee7801a"> 1244</a></span>&#160;            <span class="keyword">internal</span> <a class="code" href="a00137.html#a50f9f95cd7aefe2a601a7d5b5ee7801a">Operator</a>(<a class="code" href="a00142.html">ParseNode</a> <a class="code" href="a00142.html#af313a82103fcc2ff5a177dbb06b92f7b">parent</a>, <a class="code" href="a00143.html">Parser</a> p) : base(parent, p) {</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;                <a class="code" href="a00137.html#ac2de2f59be0e69b316627a4de16fadd3">operatorType</a> = p.ExpectSymbol(<a class="code" href="a00137.html#ad8a4bb1b46dbc3d1b7708e78a2d97e1c">Operator.OperatorTypes</a>).type;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;            }</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;</div>
<div class="line"><a name="l01248"></a><span class="lineno"><a class="line" href="a00137.html#a0c2ad7c4d6837ffc7b5325bbb8330c51"> 1248</a></span>&#160;            <span class="keyword">internal</span> <span class="keyword">override</span> <span class="keywordtype">string</span> <a class="code" href="a00137.html#a0c2ad7c4d6837ffc7b5325bbb8330c51">PrintTree</a> (<span class="keywordtype">int</span> indentLevel)</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;            {</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Tab</a> (indentLevel, <a class="code" href="a00137.html#ac2de2f59be0e69b316627a4de16fadd3">operatorType</a>.ToString ());</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;            }</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;        }</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;<span class="preprocessor">        #endregion Parse Nodes</span></div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;        <span class="comment">// Use a queue since we&#39;re continuously consuming them as</span></div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;        <span class="comment">// we parse</span></div>
<div class="line"><a name="l01257"></a><span class="lineno"><a class="line" href="a00143.html#a1a4de646937057988b59d2ff8035eae3"> 1257</a></span>&#160;        Queue&lt;Token&gt; <a class="code" href="a00143.html#a1a4de646937057988b59d2ff8035eae3">tokens</a>;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;</div>
<div class="line"><a name="l01259"></a><span class="lineno"><a class="line" href="a00143.html#a1313951b09177a1c83b6cf035139197a"> 1259</a></span>&#160;        <a class="code" href="a00123.html">Library</a> <a class="code" href="a00143.html#a1313951b09177a1c83b6cf035139197a">library</a>;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;        <span class="comment">// Take whatever we were given and make a queue out of it.</span></div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;        <span class="comment">// If library is null, no checks are made to function calls, and</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;        <span class="comment">// all function calls are assumed to be valid.</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"><a class="line" href="a00143.html#acd2714b911fb5e7c38f0e07a9dc1af58"> 1264</a></span>&#160;        <span class="keyword">internal</span> <a class="code" href="a00143.html#acd2714b911fb5e7c38f0e07a9dc1af58">Parser</a>(ICollection&lt;Token&gt; <a class="code" href="a00143.html#a1a4de646937057988b59d2ff8035eae3">tokens</a>, <a class="code" href="a00123.html">Library</a> <a class="code" href="a00143.html#a1313951b09177a1c83b6cf035139197a">library</a>) {</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;            this.tokens = <span class="keyword">new</span> Queue&lt;Token&gt;(<a class="code" href="a00143.html#a1a4de646937057988b59d2ff8035eae3">tokens</a>);</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;            this.library = <a class="code" href="a00143.html#a1313951b09177a1c83b6cf035139197a">library</a>;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;        }</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;</div>
<div class="line"><a name="l01269"></a><span class="lineno"><a class="line" href="a00143.html#a811cc7226f4f4a2f3440cdb67ad14468"> 1269</a></span>&#160;        <span class="keyword">internal</span> <a class="code" href="a00132.html">Node</a> <a class="code" href="a00143.html#a811cc7226f4f4a2f3440cdb67ad14468">Parse</a>() {</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;            <span class="comment">// Kick off the parsing process by trying to parse a whole node</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="a00132.html">Node</a>(<span class="stringliteral">&quot;Start&quot;</span>, null, <span class="keyword">this</span>);</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;        }</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;        <span class="comment">// Returns true if the next symbol is one of &#39;validTypes&#39;</span></div>
<div class="line"><a name="l01276"></a><span class="lineno"><a class="line" href="a00143.html#a666a945da1a7845b02b92592fccac291"> 1276</a></span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="a00143.html#a666a945da1a7845b02b92592fccac291">NextSymbolIs</a>(params <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>[] validTypes) {</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;            var t = this.tokens.Peek().type;</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;            <span class="keywordflow">foreach</span> (var validType <span class="keywordflow">in</span> validTypes) {</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;                <span class="keywordflow">if</span> (t == validType) {</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;                }</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;            }</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;        }</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        <span class="comment">// Returns true if the next symbols are of the same type as</span></div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;        <span class="comment">// &#39;validTypes&#39; - this is used to look further ahead in the</span></div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;        <span class="comment">// token stream, eg when we&#39;re looking for &#39;&lt;&lt;&#39; &#39;else&#39;</span></div>
<div class="line"><a name="l01290"></a><span class="lineno"><a class="line" href="a00143.html#afaa7e96d4cdaf6b1fde9ecd273c00c34"> 1290</a></span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="a00143.html#afaa7e96d4cdaf6b1fde9ecd273c00c34">NextSymbolsAre</a>(params <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>[] validTypes) {</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;            var tempQueue = <span class="keyword">new</span> Queue&lt;Token&gt; (<a class="code" href="a00143.html#a1a4de646937057988b59d2ff8035eae3">tokens</a>);</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;            <span class="keywordflow">foreach</span> (var type <span class="keywordflow">in</span> validTypes) {</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;                <span class="keywordflow">if</span> (tempQueue.Dequeue ().type != type)</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;            }</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;        }</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        <span class="comment">// Return the next token, which must be of type &#39;type&#39;,</span></div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        <span class="comment">// or throw an exception</span></div>
<div class="line"><a name="l01301"></a><span class="lineno"><a class="line" href="a00143.html#a8a396d05e7dad704009e8c77657b31d3"> 1301</a></span>&#160;        <a class="code" href="a00167.html">Token</a> <a class="code" href="a00143.html#a8a396d05e7dad704009e8c77657b31d3">ExpectSymbol</a>(<a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a> type) {</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;            var t = this.tokens.Dequeue();</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;            <span class="keywordflow">if</span> (t.type != type) {</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;                <span class="keywordflow">throw</span> ParseException.Make(t, type);</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;            }</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;            <span class="keywordflow">return</span> t;</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;        }</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;        <span class="comment">// Return the next token, which can be of any type except EndOfInput.</span></div>
<div class="line"><a name="l01311"></a><span class="lineno"><a class="line" href="a00143.html#a5a8f02cd87335aae2f2aa7de13c7512c"> 1311</a></span>&#160;        <a class="code" href="a00167.html">Token</a> <a class="code" href="a00143.html#a5a8f02cd87335aae2f2aa7de13c7512c">ExpectSymbol</a>() {</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;            var token = this.tokens.Dequeue ();</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;            <span class="keywordflow">if</span> (token.type == <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>.EndOfInput) {</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;                <span class="keywordflow">throw</span> ParseException.Make (token, <span class="stringliteral">&quot;Unexpected end of input&quot;</span>);</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;            }</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;            <span class="keywordflow">return</span> token;</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        }</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;        <span class="comment">// Return the next token, which must be one of &#39;validTypes&#39;,</span></div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;        <span class="comment">// or throw an exception</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"><a class="line" href="a00143.html#ae69620071ecfd16807c5dfc0948ee7f5"> 1321</a></span>&#160;        <a class="code" href="a00167.html">Token</a> <a class="code" href="a00143.html#ae69620071ecfd16807c5dfc0948ee7f5">ExpectSymbol</a>(params <a class="code" href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">TokenType</a>[] validTypes) {</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;            var t = this.tokens.Dequeue();</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;            <span class="keywordflow">foreach</span> (var validType <span class="keywordflow">in</span> validTypes) {</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;                <span class="keywordflow">if</span> (t.type == validType) {</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;                    <span class="keywordflow">return</span> t;</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;                }</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;            }</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;            <span class="keywordflow">throw</span> ParseException.Make(t, validTypes);</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        }</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    }</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;}</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;</div>
<div class="ttc" id="a00154_html_aa4ee47826640ad8dff651603c940c7f4"><div class="ttname"><a href="a00154.html#aa4ee47826640ad8dff651603c940c7f4">Yarn.Parser.ShortcutOptionGroup.ShortcutOptionGroup</a></div><div class="ttdeci">ShortcutOptionGroup(ParseNode parent, Parser p)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00341">Parser.cs:341</a></div></div>
<div class="ttc" id="a00037_html_ad79f9582e55ec75b68fd72ffcae0f41b"><div class="ttname"><a href="a00037.html#ad79f9582e55ec75b68fd72ffcae0f41b">Yarn.Parser.Block._statements</a></div><div class="ttdeci">List&lt; Statement &gt; _statements</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00444">Parser.cs:444</a></div></div>
<div class="ttc" id="a00143_html_a666a945da1a7845b02b92592fccac291"><div class="ttname"><a href="a00143.html#a666a945da1a7845b02b92592fccac291">Yarn.Parser.NextSymbolIs</a></div><div class="ttdeci">bool NextSymbolIs(params TokenType[] validTypes)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01276">Parser.cs:1276</a></div></div>
<div class="ttc" id="a00112_html_a679b1a21582c78ed06df36bccc9c3cbc"><div class="ttname"><a href="a00112.html#a679b1a21582c78ed06df36bccc9c3cbc">Yarn.Parser.IfStatement.clauses</a></div><div class="ttdeci">List&lt; Clause &gt; clauses</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00562">Parser.cs:562</a></div></div>
<div class="ttc" id="a00077_html_a1a362244273df822233359d8fe4e9f5d"><div class="ttname"><a href="a00077.html#a1a362244273df822233359d8fe4e9f5d">Yarn.Parser.CustomCommand.clientCommand</a></div><div class="ttdeci">string clientCommand</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00275">Parser.cs:275</a></div></div>
<div class="ttc" id="a00160_html_a518000e4e6219ce5f9f4229f505cd944ae8a0b2e51320b69d57d378776ee0647a"><div class="ttname"><a href="a00160.html#a518000e4e6219ce5f9f4229f505cd944ae8a0b2e51320b69d57d378776ee0647a">Yarn.Parser.Statement.ShortcutOptionGroup</a></div></div>
<div class="ttc" id="a00077_html_a1d9f9f57c44e1a0d228793b658339576a278e9647d033d0df032a22caa7265586"><div class="ttname"><a href="a00077.html#a1d9f9f57c44e1a0d228793b658339576a278e9647d033d0df032a22caa7265586">Yarn.Parser.CustomCommand.ClientCommand</a></div></div>
<div class="ttc" id="a00160_html_a518000e4e6219ce5f9f4229f505cd944a69bf1eda358268e97a9d792c0e88b10d"><div class="ttname"><a href="a00160.html#a518000e4e6219ce5f9f4229f505cd944a69bf1eda358268e97a9d792c0e88b10d">Yarn.Parser.Statement.IfStatement</a></div></div>
<div class="ttc" id="a00143_html_a1a4de646937057988b59d2ff8035eae3"><div class="ttname"><a href="a00143.html#a1a4de646937057988b59d2ff8035eae3">Yarn.Parser.tokens</a></div><div class="ttdeci">Queue&lt; Token &gt; tokens</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01257">Parser.cs:1257</a></div></div>
<div class="ttc" id="a00077_html_a02ee2902115c823bdb46715041b3a2f6"><div class="ttname"><a href="a00077.html#a02ee2902115c823bdb46715041b3a2f6">Yarn.Parser.CustomCommand.CanParse</a></div><div class="ttdeci">static bool CanParse(Parser p)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00277">Parser.cs:277</a></div></div>
<div class="ttc" id="a00181_html_a8ee2b09b7d28eaf97bf63c74d0023bfd"><div class="ttname"><a href="a00181.html#a8ee2b09b7d28eaf97bf63c74d0023bfd">Yarn.Value.variableName</a></div><div class="ttdeci">string variableName</div><div class="ttdef"><b>Definition:</b> <a href="a00303_source.html#l00022">Value.cs:22</a></div></div>
<div class="ttc" id="a00044_html"><div class="ttname"><a href="a00044.html">Yarn.Parser.IfStatement.Clause</a></div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00546">Parser.cs:546</a></div></div>
<div class="ttc" id="a00142_html_a054f36c80d5eeacd569a8859f599af67"><div class="ttname"><a href="a00142.html#a054f36c80d5eeacd569a8859f599af67">Yarn.Parser.ParseNode.TagsToString</a></div><div class="ttdeci">string TagsToString(int indentLevel)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00078">Parser.cs:78</a></div></div>
<div class="ttc" id="a00098_html_a17e5101d02b96d0071e7a0223e4daa3d"><div class="ttname"><a href="a00098.html#a17e5101d02b96d0071e7a0223e4daa3d">Yarn.Parser.Expression.Expression</a></div><div class="ttdeci">Expression(ParseNode parent, ValueNode value, Parser p)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00761">Parser.cs:761</a></div></div>
<div class="ttc" id="a00037_html_a7fa97243e2a807c2255988547d31cac7"><div class="ttname"><a href="a00037.html#a7fa97243e2a807c2255988547d31cac7">Yarn.Parser.Block.CanParse</a></div><div class="ttdeci">static bool CanParse(Parser p)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00436">Parser.cs:436</a></div></div>
<div class="ttc" id="a00182_html_a7be6a979ee21b2d07ce541fb9c5b52df"><div class="ttname"><a href="a00182.html#a7be6a979ee21b2d07ce541fb9c5b52df">Yarn.Parser.ValueNode.UseToken</a></div><div class="ttdeci">void UseToken(Token t)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00676">Parser.cs:676</a></div></div>
<div class="ttc" id="a00140_html_ad18938712d01cf71edbc75d4974cd0e0"><div class="ttname"><a href="a00140.html#ad18938712d01cf71edbc75d4974cd0e0">Yarn.Parser.OptionStatement.OptionStatement</a></div><div class="ttdeci">OptionStatement(ParseNode parent, Parser p)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00488">Parser.cs:488</a></div></div>
<div class="ttc" id="a00160_html_a518000e4e6219ce5f9f4229f505cd944"><div class="ttname"><a href="a00160.html#a518000e4e6219ce5f9f4229f505cd944">Yarn.Parser.Statement.Type</a></div><div class="ttdeci">Type</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00165">Parser.cs:165</a></div></div>
<div class="ttc" id="a00142_html"><div class="ttname"><a href="a00142.html">Yarn.Parser.ParseNode</a></div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00056">Parser.cs:56</a></div></div>
<div class="ttc" id="a00045_html_ae0be2e5cf13d5779816102439e61ff1a"><div class="ttname"><a href="a00045.html#ae0be2e5cf13d5779816102439e61ff1a">Yarn.Function</a></div><div class="ttdeci">delegate void Function(params Value[] parameters)</div></div>
<div class="ttc" id="a00140_html_aafba8c941dbd3d0ef841ac9d472e1ba3"><div class="ttname"><a href="a00140.html#aafba8c941dbd3d0ef841ac9d472e1ba3">Yarn.Parser.OptionStatement.PrintTree</a></div><div class="ttdeci">override string PrintTree(int indentLevel)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00523">Parser.cs:523</a></div></div>
<div class="ttc" id="a00182_html_a51ab5939344f9bfa21181c02cf0e341d"><div class="ttname"><a href="a00182.html#a51ab5939344f9bfa21181c02cf0e341d">Yarn.Parser.ValueNode.value</a></div><div class="ttdeci">Value value</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00674">Parser.cs:674</a></div></div>
<div class="ttc" id="a00182_html_ae4659e4431e9846a45e0d048c960781a"><div class="ttname"><a href="a00182.html#ae4659e4431e9846a45e0d048c960781a">Yarn.Parser.ValueNode.PrintTree</a></div><div class="ttdeci">override string PrintTree(int indentLevel)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00725">Parser.cs:725</a></div></div>
<div class="ttc" id="a00033_html_accb9ddcb472eb035a65188c857b8efd8"><div class="ttname"><a href="a00033.html#accb9ddcb472eb035a65188c857b8efd8">Yarn.Parser.AssignmentStatement.PrintTree</a></div><div class="ttdeci">override string PrintTree(int indentLevel)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01131">Parser.cs:1131</a></div></div>
<div class="ttc" id="a00160_html_a518000e4e6219ce5f9f4229f505cd944a4ee9d26530a9c097d63b74d383c48341"><div class="ttname"><a href="a00160.html#a518000e4e6219ce5f9f4229f505cd944a4ee9d26530a9c097d63b74d383c48341">Yarn.Parser.Statement.AssignmentStatement</a></div></div>
<div class="ttc" id="a00138_html_a0758c6f7dac4b205f616b43b1af95b95"><div class="ttname"><a href="a00138.html#a0758c6f7dac4b205f616b43b1af95b95">Yarn.Parser.Operator.OperatorInfo.arguments</a></div><div class="ttdeci">int arguments</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01157">Parser.cs:1157</a></div></div>
<div class="ttc" id="a00044_html_a1abd1f7c41f68ccdf64074ea49365be9"><div class="ttname"><a href="a00044.html#a1abd1f7c41f68ccdf64074ea49365be9">Yarn.Parser.IfStatement.Clause.expression</a></div><div class="ttdeci">Expression expression</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00547">Parser.cs:547</a></div></div>
<div class="ttc" id="a00143_html_ae69620071ecfd16807c5dfc0948ee7f5"><div class="ttname"><a href="a00143.html#ae69620071ecfd16807c5dfc0948ee7f5">Yarn.Parser.ExpectSymbol</a></div><div class="ttdeci">Token ExpectSymbol(params TokenType[] validTypes)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01321">Parser.cs:1321</a></div></div>
<div class="ttc" id="a00123_html"><div class="ttname"><a href="a00123.html">Yarn.Library</a></div><div class="ttdef"><b>Definition:</b> <a href="a00299_source.html#l00087">Library.cs:87</a></div></div>
<div class="ttc" id="a00160_html_aaac6d1e0c3b31f33e1c6f964c205153e"><div class="ttname"><a href="a00160.html#aaac6d1e0c3b31f33e1c6f964c205153e">Yarn.Parser.Statement.PrintTree</a></div><div class="ttdeci">override string PrintTree(int indentLevel)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00226">Parser.cs:226</a></div></div>
<div class="ttc" id="a00137_html_a50f9f95cd7aefe2a601a7d5b5ee7801a"><div class="ttname"><a href="a00137.html#a50f9f95cd7aefe2a601a7d5b5ee7801a">Yarn.Parser.Operator.Operator</a></div><div class="ttdeci">Operator(ParseNode parent, Parser p)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01244">Parser.cs:1244</a></div></div>
<div class="ttc" id="a00160_html_a54d73ad69c4af4a0d61edeaea4c8ca4f"><div class="ttname"><a href="a00160.html#a54d73ad69c4af4a0d61edeaea4c8ca4f">Yarn.Parser.Statement.shortcutOptionGroup</a></div><div class="ttdeci">ShortcutOptionGroup shortcutOptionGroup</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00184">Parser.cs:184</a></div></div>
<div class="ttc" id="a00167_html_a3df6b32d6190a639619a3f064c2154e2"><div class="ttname"><a href="a00167.html#a3df6b32d6190a639619a3f064c2154e2">Yarn.Token.value</a></div><div class="ttdeci">string value</div><div class="ttdef"><b>Definition:</b> <a href="a00298_source.html#l00178">Lexer.cs:178</a></div></div>
<div class="ttc" id="a00077_html_a1d9f9f57c44e1a0d228793b658339576"><div class="ttname"><a href="a00077.html#a1d9f9f57c44e1a0d228793b658339576">Yarn.Parser.CustomCommand.Type</a></div><div class="ttdeci">Type</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00267">Parser.cs:267</a></div></div>
<div class="ttc" id="a00140_html_abbe56fba06169901508e6c659f06c236"><div class="ttname"><a href="a00140.html#abbe56fba06169901508e6c659f06c236">Yarn.Parser.OptionStatement.destination</a></div><div class="ttdeci">string destination</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00485">Parser.cs:485</a></div></div>
<div class="ttc" id="a00142_html_af313a82103fcc2ff5a177dbb06b92f7b"><div class="ttname"><a href="a00142.html#af313a82103fcc2ff5a177dbb06b92f7b">Yarn.Parser.ParseNode.parent</a></div><div class="ttdeci">ParseNode parent</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00058">Parser.cs:58</a></div></div>
<div class="ttc" id="a00167_html"><div class="ttname"><a href="a00167.html">Yarn.Token</a></div><div class="ttdef"><b>Definition:</b> <a href="a00298_source.html#l00174">Lexer.cs:174</a></div></div>
<div class="ttc" id="a00181_html_ae1892c1c7a8177537d1caa39a2e51da6"><div class="ttname"><a href="a00181.html#ae1892c1c7a8177537d1caa39a2e51da6">Yarn.Value.numberValue</a></div><div class="ttdeci">float numberValue</div><div class="ttdef"><b>Definition:</b> <a href="a00303_source.html#l00021">Value.cs:21</a></div></div>
<div class="ttc" id="a00182_html"><div class="ttname"><a href="a00182.html">Yarn.Parser.ValueNode</a></div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00672">Parser.cs:672</a></div></div>
<div class="ttc" id="a00143_html"><div class="ttname"><a href="a00143.html">Yarn.Parser</a></div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00037">Parser.cs:37</a></div></div>
<div class="ttc" id="a00044_html_a7f4fc9399896512b68fdc7bc7cf818c9"><div class="ttname"><a href="a00044.html#a7f4fc9399896512b68fdc7bc7cf818c9">Yarn.Parser.IfStatement.Clause.PrintTree</a></div><div class="ttdeci">string PrintTree(int indentLevel)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00549">Parser.cs:549</a></div></div>
<div class="ttc" id="a00181_html_a6d5820fafa766911b9da84d1ed33e51a"><div class="ttname"><a href="a00181.html#a6d5820fafa766911b9da84d1ed33e51a">Yarn.Value.type</a></div><div class="ttdeci">Value.Type type</div><div class="ttdef"><b>Definition:</b> <a href="a00303_source.html#l00018">Value.cs:18</a></div></div>
<div class="ttc" id="a00077_html_a4250d192d5b58e2404a14c68eb616f16"><div class="ttname"><a href="a00077.html#a4250d192d5b58e2404a14c68eb616f16">Yarn.Parser.CustomCommand.expression</a></div><div class="ttdeci">Expression expression</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00274">Parser.cs:274</a></div></div>
<div class="ttc" id="a00112_html_afd6b96e1a27872701c4e6832f17fc3ce"><div class="ttname"><a href="a00112.html#afd6b96e1a27872701c4e6832f17fc3ce">Yarn.Parser.IfStatement.CanParse</a></div><div class="ttdeci">static bool CanParse(Parser p)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00537">Parser.cs:537</a></div></div>
<div class="ttc" id="a00033_html_a4f021e4c835e429ed5b5bb504a5acf39"><div class="ttname"><a href="a00033.html#a4f021e4c835e429ed5b5bb504a5acf39">Yarn.Parser.AssignmentStatement.CanParse</a></div><div class="ttdeci">static bool CanParse(Parser p)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01101">Parser.cs:1101</a></div></div>
<div class="ttc" id="a00154_html_a494c8c422cebbea5c50878db64334873"><div class="ttname"><a href="a00154.html#a494c8c422cebbea5c50878db64334873">Yarn.Parser.ShortcutOptionGroup._options</a></div><div class="ttdeci">List&lt; ShortcutOption &gt; _options</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00339">Parser.cs:339</a></div></div>
<div class="ttc" id="a00141_html"><div class="ttname"><a href="a00141.html">Yarn.ParseException</a></div><div class="ttdef"><b>Definition:</b> <a href="a00302_source.html#l00010">Program.cs:10</a></div></div>
<div class="ttc" id="a00037_html_aaaacfc4e3ff2871fa5e2fb75e48636de"><div class="ttname"><a href="a00037.html#aaaacfc4e3ff2871fa5e2fb75e48636de">Yarn.Parser.Block.PrintTree</a></div><div class="ttdeci">override string PrintTree(int indentLevel)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00463">Parser.cs:463</a></div></div>
<div class="ttc" id="a00138_html_accba40a72d9709ca3c18810b8661afe3"><div class="ttname"><a href="a00138.html#accba40a72d9709ca3c18810b8661afe3">Yarn.Parser.Operator.OperatorInfo.associativity</a></div><div class="ttdeci">Associativity associativity</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01155">Parser.cs:1155</a></div></div>
<div class="ttc" id="a00098_html_a5047d9b3301d6c7367f8095267ea9b07"><div class="ttname"><a href="a00098.html#a5047d9b3301d6c7367f8095267ea9b07">Yarn.Parser.Expression.Expression</a></div><div class="ttdeci">Expression(ParseNode parent, FunctionInfo function, List&lt; Expression &gt; parameters, Parser p)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00766">Parser.cs:766</a></div></div>
<div class="ttc" id="a00142_html_a18b493382de0fde5b4299c1bd2250075"><div class="ttname"><a href="a00142.html#a18b493382de0fde5b4299c1bd2250075">Yarn.Parser.ParseNode.lineNumber</a></div><div class="ttdeci">int lineNumber</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00061">Parser.cs:61</a></div></div>
<div class="ttc" id="a00132_html_abdae3fb1c6927b38ce29b1b71a00cb12"><div class="ttname"><a href="a00132.html#abdae3fb1c6927b38ce29b1b71a00cb12">Yarn.Parser.Node.statements</a></div><div class="ttdeci">IEnumerable&lt; Statement &gt; statements</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00127">Parser.cs:127</a></div></div>
<div class="ttc" id="a00077_html_a5ef3bc96812be224d91548bfcdfd4b92"><div class="ttname"><a href="a00077.html#a5ef3bc96812be224d91548bfcdfd4b92">Yarn.Parser.CustomCommand.type</a></div><div class="ttdeci">Type type</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00272">Parser.cs:272</a></div></div>
<div class="ttc" id="a00137_html_a83fa1b8db0e6678006920812b6f33f62a945d5e233cf7d6240f6b783b36a374ff"><div class="ttname"><a href="a00137.html#a83fa1b8db0e6678006920812b6f33f62a945d5e233cf7d6240f6b783b36a374ff">Yarn.Parser.Operator.Left</a></div></div>
<div class="ttc" id="a00154_html_a91b28e9dce684c476c526c4103b6c488"><div class="ttname"><a href="a00154.html#a91b28e9dce684c476c526c4103b6c488">Yarn.Parser.ShortcutOptionGroup.options</a></div><div class="ttdeci">IEnumerable&lt; ShortcutOption &gt; options</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00336">Parser.cs:336</a></div></div>
<div class="ttc" id="a00160_html_a518000e4e6219ce5f9f4229f505cd944ae1e4c8c9ccd9fc39c391da4bcd093fb2"><div class="ttname"><a href="a00160.html#a518000e4e6219ce5f9f4229f505cd944ae1e4c8c9ccd9fc39c391da4bcd093fb2">Yarn.Parser.Statement.Block</a></div></div>
<div class="ttc" id="a00160_html_aa3fa0eb260e412720562ce06b7dc06fe"><div class="ttname"><a href="a00160.html#aa3fa0eb260e412720562ce06b7dc06fe">Yarn.Parser.Statement.type</a></div><div class="ttdeci">Statement.Type type</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00175">Parser.cs:175</a></div></div>
<div class="ttc" id="a00033_html_a4e764622b716a4138d1fd9e005c41336"><div class="ttname"><a href="a00033.html#a4e764622b716a4138d1fd9e005c41336">Yarn.Parser.AssignmentStatement.destinationVariableName</a></div><div class="ttdeci">string destinationVariableName</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01106">Parser.cs:1106</a></div></div>
<div class="ttc" id="a00181_html_a1ed2964965baca8621c45efa23f37660"><div class="ttname"><a href="a00181.html#a1ed2964965baca8621c45efa23f37660">Yarn.Value.NULL</a></div><div class="ttdeci">static readonly Value NULL</div><div class="ttdef"><b>Definition:</b> <a href="a00303_source.html#l00008">Value.cs:8</a></div></div>
<div class="ttc" id="a00045_html_a00365"><div class="ttname"><a href="a00045.html#a00365">Yarn.Line</a></div><div class="ttdoc">Information about stuff that the client should handle. </div><div class="ttdef"><b>Definition:</b> <a href="a00296_source.html#l00052">Dialogue.cs:52</a></div></div>
<div class="ttc" id="a00138_html"><div class="ttname"><a href="a00138.html">Yarn.Parser.Operator.OperatorInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01154">Parser.cs:1154</a></div></div>
<div class="ttc" id="a00100_html_a1ed09ff8aafa230a0d2bbc23cd6cd763"><div class="ttname"><a href="a00100.html#a1ed09ff8aafa230a0d2bbc23cd6cd763">Yarn.FunctionInfo.IsParameterCountCorrect</a></div><div class="ttdeci">bool IsParameterCountCorrect(int parameterCount)</div><div class="ttdef"><b>Definition:</b> <a href="a00299_source.html#l00079">Library.cs:79</a></div></div>
<div class="ttc" id="a00037_html_a42e3d555bbd5ecbdf61c45ad715be7e1"><div class="ttname"><a href="a00037.html#a42e3d555bbd5ecbdf61c45ad715be7e1">Yarn.Parser.Block.statements</a></div><div class="ttdeci">IEnumerable&lt; Statement &gt; statements</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00442">Parser.cs:442</a></div></div>
<div class="ttc" id="a00160_html_a518000e4e6219ce5f9f4229f505cd944af6b081742758e5cbc3a2e679e521a4fe"><div class="ttname"><a href="a00160.html#a518000e4e6219ce5f9f4229f505cd944af6b081742758e5cbc3a2e679e521a4fe">Yarn.Parser.Statement.CustomCommand</a></div></div>
<div class="ttc" id="a00154_html_a906962aae2ecb11535f34249a34703f8"><div class="ttname"><a href="a00154.html#a906962aae2ecb11535f34249a34703f8">Yarn.Parser.ShortcutOptionGroup.CanParse</a></div><div class="ttdeci">static bool CanParse(Parser p)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00331">Parser.cs:331</a></div></div>
<div class="ttc" id="a00137_html_a83fa1b8db0e6678006920812b6f33f62a92b09c7c48c520c3c55e497875da437c"><div class="ttname"><a href="a00137.html#a83fa1b8db0e6678006920812b6f33f62a92b09c7c48c520c3c55e497875da437c">Yarn.Parser.Operator.Right</a></div></div>
<div class="ttc" id="a00182_html_afeaea21eee1c8360a76a202a419d3912"><div class="ttname"><a href="a00182.html#afeaea21eee1c8360a76a202a419d3912">Yarn.Parser.ValueNode.ValueNode</a></div><div class="ttdeci">ValueNode(ParseNode parent, Token t, Parser p)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00713">Parser.cs:713</a></div></div>
<div class="ttc" id="a00112_html"><div class="ttname"><a href="a00112.html">Yarn.Parser.IfStatement</a></div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00536">Parser.cs:536</a></div></div>
<div class="ttc" id="a00153_html_a529a2ef1aa6d7226db4ea7f3ea92b8c2"><div class="ttname"><a href="a00153.html#a529a2ef1aa6d7226db4ea7f3ea92b8c2">Yarn.Parser.ShortcutOption.PrintTree</a></div><div class="ttdeci">override string PrintTree(int indentLevel)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00409">Parser.cs:409</a></div></div>
<div class="ttc" id="a00142_html_a9e7e90bbaed268529230512e4b5a2f77"><div class="ttname"><a href="a00142.html#a9e7e90bbaed268529230512e4b5a2f77">Yarn.Parser.ParseNode.ParseNode</a></div><div class="ttdeci">ParseNode(ParseNode parent, Parser p)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00065">Parser.cs:65</a></div></div>
<div class="ttc" id="a00100_html"><div class="ttname"><a href="a00100.html">Yarn.FunctionInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="a00299_source.html#l00009">Library.cs:9</a></div></div>
<div class="ttc" id="a00160_html_a8a98e7d4c66f9909da865f0e671d69f2"><div class="ttname"><a href="a00160.html#a8a98e7d4c66f9909da865f0e671d69f2">Yarn.Parser.Statement.customCommand</a></div><div class="ttdeci">CustomCommand customCommand</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00182">Parser.cs:182</a></div></div>
<div class="ttc" id="a00033_html_a34d41e545770d5f41542253d0bb4f8b3"><div class="ttname"><a href="a00033.html#a34d41e545770d5f41542253d0bb4f8b3">Yarn.Parser.AssignmentStatement.AssignmentStatement</a></div><div class="ttdeci">AssignmentStatement(ParseNode parent, Parser p)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01120">Parser.cs:1120</a></div></div>
<div class="ttc" id="a00153_html_a33d667370031f58b054b79a39891c3f3"><div class="ttname"><a href="a00153.html#a33d667370031f58b054b79a39891c3f3">Yarn.Parser.ShortcutOption.optionNode</a></div><div class="ttdeci">Node optionNode</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00371">Parser.cs:371</a></div></div>
<div class="ttc" id="a00181_html"><div class="ttname"><a href="a00181.html">Yarn.Value</a></div><div class="ttdef"><b>Definition:</b> <a href="a00303_source.html#l00007">Value.cs:7</a></div></div>
<div class="ttc" id="a00143_html_a8a396d05e7dad704009e8c77657b31d3"><div class="ttname"><a href="a00143.html#a8a396d05e7dad704009e8c77657b31d3">Yarn.Parser.ExpectSymbol</a></div><div class="ttdeci">Token ExpectSymbol(TokenType type)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01301">Parser.cs:1301</a></div></div>
<div class="ttc" id="a00142_html_a58b3a15788fd2d4127d73619dc6d04ae"><div class="ttname"><a href="a00142.html#a58b3a15788fd2d4127d73619dc6d04ae">Yarn.Parser.ParseNode.tags</a></div><div class="ttdeci">string[] tags</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00076">Parser.cs:76</a></div></div>
<div class="ttc" id="a00140_html_a7f27d78e67fed6992767e995e70fc468"><div class="ttname"><a href="a00140.html#a7f27d78e67fed6992767e995e70fc468">Yarn.Parser.OptionStatement.label</a></div><div class="ttdeci">string label</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00486">Parser.cs:486</a></div></div>
<div class="ttc" id="a00132_html"><div class="ttname"><a href="a00132.html">Yarn.Parser.Node</a></div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00117">Parser.cs:117</a></div></div>
<div class="ttc" id="a00154_html_a7b60f85e46b8767db81177ec40e83104"><div class="ttname"><a href="a00154.html#a7b60f85e46b8767db81177ec40e83104">Yarn.Parser.ShortcutOptionGroup.PrintTree</a></div><div class="ttdeci">override string PrintTree(int indentLevel)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00351">Parser.cs:351</a></div></div>
<div class="ttc" id="a00098_html_a7b21380bead8ae08b2cfc6594edab32c"><div class="ttname"><a href="a00098.html#a7b21380bead8ae08b2cfc6594edab32c">Yarn.Parser.Expression.parameters</a></div><div class="ttdeci">List&lt; Expression &gt; parameters</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00759">Parser.cs:759</a></div></div>
<div class="ttc" id="a00077_html_a49150c9046dcad61d61ce35c51816313"><div class="ttname"><a href="a00077.html#a49150c9046dcad61d61ce35c51816313">Yarn.Parser.CustomCommand.CustomCommand</a></div><div class="ttdeci">CustomCommand(ParseNode parent, Parser p)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00283">Parser.cs:283</a></div></div>
<div class="ttc" id="a00153_html_ab43ec731479a56891389f6ece87f5f62"><div class="ttname"><a href="a00153.html#ab43ec731479a56891389f6ece87f5f62">Yarn.Parser.ShortcutOption.label</a></div><div class="ttdeci">string label</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00369">Parser.cs:369</a></div></div>
<div class="ttc" id="a00098_html_a509ba6d93218203bae56a5a7a82e8261"><div class="ttname"><a href="a00098.html#a509ba6d93218203bae56a5a7a82e8261">Yarn.Parser.Expression.PrintTree</a></div><div class="ttdeci">override string PrintTree(int indentLevel)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01073">Parser.cs:1073</a></div></div>
<div class="ttc" id="a00137_html_a171027dbddf208784c824ae7fe72cb71"><div class="ttname"><a href="a00137.html#a171027dbddf208784c824ae7fe72cb71">Yarn.Parser.Operator.Operator</a></div><div class="ttdeci">Operator(ParseNode parent, TokenType t, Parser p)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01240">Parser.cs:1240</a></div></div>
<div class="ttc" id="a00045_html_a301aa7c866593a5b625a8fc158bbeace"><div class="ttname"><a href="a00045.html#a301aa7c866593a5b625a8fc158bbeace">Yarn.TokenType</a></div><div class="ttdeci">TokenType</div><div class="ttdef"><b>Definition:</b> <a href="a00298_source.html#l00079">Lexer.cs:79</a></div></div>
<div class="ttc" id="a00137_html_ad8a4bb1b46dbc3d1b7708e78a2d97e1c"><div class="ttname"><a href="a00137.html#ad8a4bb1b46dbc3d1b7708e78a2d97e1c">Yarn.Parser.Operator.OperatorTypes</a></div><div class="ttdeci">static TokenType[] OperatorTypes</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01211">Parser.cs:1211</a></div></div>
<div class="ttc" id="a00160_html_a37695c7b00776bb292fd64894a70fb72"><div class="ttname"><a href="a00160.html#a37695c7b00776bb292fd64894a70fb72">Yarn.Parser.Statement.line</a></div><div class="ttdeci">string line</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00183">Parser.cs:183</a></div></div>
<div class="ttc" id="a00037_html"><div class="ttname"><a href="a00037.html">Yarn.Parser.Block</a></div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00435">Parser.cs:435</a></div></div>
<div class="ttc" id="a00137_html"><div class="ttname"><a href="a00137.html">Yarn.Parser.Operator</a></div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01144">Parser.cs:1144</a></div></div>
<div class="ttc" id="a00112_html_a5494c1daef8e0f3ac3ab68f91db4f332"><div class="ttname"><a href="a00112.html#a5494c1daef8e0f3ac3ab68f91db4f332">Yarn.Parser.IfStatement.PrintTree</a></div><div class="ttdeci">override string PrintTree(int indentLevel)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00651">Parser.cs:651</a></div></div>
<div class="ttc" id="a00098_html_a569e516782891544c334ff8131b23108"><div class="ttname"><a href="a00098.html#a569e516782891544c334ff8131b23108">Yarn.Parser.Expression.value</a></div><div class="ttdeci">ValueNode value</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00756">Parser.cs:756</a></div></div>
<div class="ttc" id="a00154_html"><div class="ttname"><a href="a00154.html">Yarn.Parser.ShortcutOptionGroup</a></div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00330">Parser.cs:330</a></div></div>
<div class="ttc" id="a00143_html_aa8fa36b46de12a1c561d77b99c4b9ae3"><div class="ttname"><a href="a00143.html#aa8fa36b46de12a1c561d77b99c4b9ae3">Yarn.Parser.Tab</a></div><div class="ttdeci">static string Tab(int indentLevel, string input, bool newLine=true)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00040">Parser.cs:40</a></div></div>
<div class="ttc" id="a00153_html_a31ece7f65af1e43961b68ba0275cdfaf"><div class="ttname"><a href="a00153.html#a31ece7f65af1e43961b68ba0275cdfaf">Yarn.Parser.ShortcutOption.condition</a></div><div class="ttdeci">Expression condition</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00370">Parser.cs:370</a></div></div>
<div class="ttc" id="a00112_html_ae534078389e8663edf7660403acf3cbc"><div class="ttname"><a href="a00112.html#ae534078389e8663edf7660403acf3cbc">Yarn.Parser.IfStatement.IfStatement</a></div><div class="ttdeci">IfStatement(ParseNode parent, Parser p)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00564">Parser.cs:564</a></div></div>
<div class="ttc" id="a00138_html_a25faca62235c9f8542e4a071ba8ebc0b"><div class="ttname"><a href="a00138.html#a25faca62235c9f8542e4a071ba8ebc0b">Yarn.Parser.Operator.OperatorInfo.OperatorInfo</a></div><div class="ttdeci">OperatorInfo(Associativity associativity, int precedence, int arguments)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01158">Parser.cs:1158</a></div></div>
<div class="ttc" id="a00138_html_a0b2921d7b863e268d33aa15213395093"><div class="ttname"><a href="a00138.html#a0b2921d7b863e268d33aa15213395093">Yarn.Parser.Operator.OperatorInfo.precedence</a></div><div class="ttdeci">int precedence</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01156">Parser.cs:1156</a></div></div>
<div class="ttc" id="a00098_html_aceddb5496ccffe668bced2d131e4bf86affb017548928ab2305e7c55cb67c04ca"><div class="ttname"><a href="a00098.html#aceddb5496ccffe668bced2d131e4bf86affb017548928ab2305e7c55cb67c04ca">Yarn.Parser.Expression.FunctionCall</a></div></div>
<div class="ttc" id="a00140_html"><div class="ttname"><a href="a00140.html">Yarn.Parser.OptionStatement</a></div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00479">Parser.cs:479</a></div></div>
<div class="ttc" id="a00098_html"><div class="ttname"><a href="a00098.html">Yarn.Parser.Expression</a></div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00747">Parser.cs:747</a></div></div>
<div class="ttc" id="a00160_html_acba736ffbcc0f8bf5cee2b23f7733dff"><div class="ttname"><a href="a00160.html#acba736ffbcc0f8bf5cee2b23f7733dff">Yarn.Parser.Statement.Statement</a></div><div class="ttdeci">Statement(ParseNode parent, Parser p)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00186">Parser.cs:186</a></div></div>
<div class="ttc" id="a00143_html_a5a8f02cd87335aae2f2aa7de13c7512c"><div class="ttname"><a href="a00143.html#a5a8f02cd87335aae2f2aa7de13c7512c">Yarn.Parser.ExpectSymbol</a></div><div class="ttdeci">Token ExpectSymbol()</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01311">Parser.cs:1311</a></div></div>
<div class="ttc" id="a00098_html_aceddb5496ccffe668bced2d131e4bf86a689202409e48743b914713f96d93947c"><div class="ttname"><a href="a00098.html#aceddb5496ccffe668bced2d131e4bf86a689202409e48743b914713f96d93947c">Yarn.Parser.Expression.Value</a></div></div>
<div class="ttc" id="a00137_html_a871e7b4652c48f456647d3950ac37531"><div class="ttname"><a href="a00137.html#a871e7b4652c48f456647d3950ac37531">Yarn.Parser.Operator.InfoForOperator</a></div><div class="ttdeci">static OperatorInfo InfoForOperator(TokenType op)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01165">Parser.cs:1165</a></div></div>
<div class="ttc" id="a00160_html_a15020b7dab4983adbd185d5c2c2ebe84"><div class="ttname"><a href="a00160.html#a15020b7dab4983adbd185d5c2c2ebe84">Yarn.Parser.Statement.optionStatement</a></div><div class="ttdeci">OptionStatement optionStatement</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00180">Parser.cs:180</a></div></div>
<div class="ttc" id="a00132_html_ae910a20906be9b1964499efaefa48274"><div class="ttname"><a href="a00132.html#ae910a20906be9b1964499efaefa48274">Yarn.Parser.Node._statements</a></div><div class="ttdeci">List&lt; Statement &gt; _statements</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00130">Parser.cs:130</a></div></div>
<div class="ttc" id="a00182_html_ac63fbe99131dc3b42af16a2d087c0655"><div class="ttname"><a href="a00182.html#ac63fbe99131dc3b42af16a2d087c0655">Yarn.Parser.ValueNode.ValueNode</a></div><div class="ttdeci">ValueNode(ParseNode parent, Parser p)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00718">Parser.cs:718</a></div></div>
<div class="ttc" id="a00143_html_a1313951b09177a1c83b6cf035139197a"><div class="ttname"><a href="a00143.html#a1313951b09177a1c83b6cf035139197a">Yarn.Parser.library</a></div><div class="ttdeci">Library library</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01259">Parser.cs:1259</a></div></div>
<div class="ttc" id="a00181_html_add1b07146f1a9e4b655b33c93d07dff9"><div class="ttname"><a href="a00181.html#add1b07146f1a9e4b655b33c93d07dff9">Yarn.Value.stringValue</a></div><div class="ttdeci">string stringValue</div><div class="ttdef"><b>Definition:</b> <a href="a00303_source.html#l00023">Value.cs:23</a></div></div>
<div class="ttc" id="a00181_html_acb140e3466e132528409d4c441fd67da"><div class="ttname"><a href="a00181.html#acb140e3466e132528409d4c441fd67da">Yarn.Value.boolValue</a></div><div class="ttdeci">bool boolValue</div><div class="ttdef"><b>Definition:</b> <a href="a00303_source.html#l00024">Value.cs:24</a></div></div>
<div class="ttc" id="a00142_html_a0d6611653f20c2e4d90a97a96c657137"><div class="ttname"><a href="a00142.html#a0d6611653f20c2e4d90a97a96c657137">Yarn.Parser.ParseNode.PrintTree</a></div><div class="ttdeci">abstract string PrintTree(int indentLevel)</div></div>
<div class="ttc" id="a00033_html"><div class="ttname"><a href="a00033.html">Yarn.Parser.AssignmentStatement</a></div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01100">Parser.cs:1100</a></div></div>
<div class="ttc" id="a00160_html_a9a71577456598af0f25b23ccd02154e4"><div class="ttname"><a href="a00160.html#a9a71577456598af0f25b23ccd02154e4">Yarn.Parser.Statement.ifStatement</a></div><div class="ttdeci">IfStatement ifStatement</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00179">Parser.cs:179</a></div></div>
<div class="ttc" id="a00132_html_a7b1e55929dd7c9b1b0349a70d1787f2a"><div class="ttname"><a href="a00132.html#a7b1e55929dd7c9b1b0349a70d1787f2a">Yarn.Parser.Node.nodeTags</a></div><div class="ttdeci">List&lt; string &gt; nodeTags</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00124">Parser.cs:124</a></div></div>
<div class="ttc" id="a00137_html_a0c2ad7c4d6837ffc7b5325bbb8330c51"><div class="ttname"><a href="a00137.html#a0c2ad7c4d6837ffc7b5325bbb8330c51">Yarn.Parser.Operator.PrintTree</a></div><div class="ttdeci">override string PrintTree(int indentLevel)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01248">Parser.cs:1248</a></div></div>
<div class="ttc" id="a00160_html"><div class="ttname"><a href="a00160.html">Yarn.Parser.Statement</a></div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00163">Parser.cs:163</a></div></div>
<div class="ttc" id="a00033_html_a7ada366012cacd98436db80227ee65f5"><div class="ttname"><a href="a00033.html#a7ada366012cacd98436db80227ee65f5">Yarn.Parser.AssignmentStatement.valueExpression</a></div><div class="ttdeci">Expression valueExpression</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01108">Parser.cs:1108</a></div></div>
<div class="ttc" id="a00143_html_a811cc7226f4f4a2f3440cdb67ad14468"><div class="ttname"><a href="a00143.html#a811cc7226f4f4a2f3440cdb67ad14468">Yarn.Parser.Parse</a></div><div class="ttdeci">Node Parse()</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01269">Parser.cs:1269</a></div></div>
<div class="ttc" id="a00137_html_a77a9edf71f86263e1695869e69505007"><div class="ttname"><a href="a00137.html#a77a9edf71f86263e1695869e69505007">Yarn.Parser.Operator.IsOperator</a></div><div class="ttdeci">static bool IsOperator(TokenType type)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01206">Parser.cs:1206</a></div></div>
<div class="ttc" id="a00143_html_afaa7e96d4cdaf6b1fde9ecd273c00c34"><div class="ttname"><a href="a00143.html#afaa7e96d4cdaf6b1fde9ecd273c00c34">Yarn.Parser.NextSymbolsAre</a></div><div class="ttdeci">bool NextSymbolsAre(params TokenType[] validTypes)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01290">Parser.cs:1290</a></div></div>
<div class="ttc" id="a00160_html_ac14dfc7210974b4cd86402ed011fb0b6"><div class="ttname"><a href="a00160.html#ac14dfc7210974b4cd86402ed011fb0b6">Yarn.Parser.Statement.block</a></div><div class="ttdeci">Block block</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00178">Parser.cs:178</a></div></div>
<div class="ttc" id="a00160_html_a518000e4e6219ce5f9f4229f505cd944a7e5b9e4625bac525ed765621cb074ef7"><div class="ttname"><a href="a00160.html#a518000e4e6219ce5f9f4229f505cd944a7e5b9e4625bac525ed765621cb074ef7">Yarn.Parser.Statement.OptionStatement</a></div></div>
<div class="ttc" id="a00077_html"><div class="ttname"><a href="a00077.html">Yarn.Parser.CustomCommand</a></div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00265">Parser.cs:265</a></div></div>
<div class="ttc" id="a00132_html_ae0562dc06ca747307b66039ef2f28772"><div class="ttname"><a href="a00132.html#ae0562dc06ca747307b66039ef2f28772">Yarn.Parser.Node.Node</a></div><div class="ttdeci">Node(string name, ParseNode parent, Parser p)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00132">Parser.cs:132</a></div></div>
<div class="ttc" id="a00137_html_a83fa1b8db0e6678006920812b6f33f62"><div class="ttname"><a href="a00137.html#a83fa1b8db0e6678006920812b6f33f62">Yarn.Parser.Operator.Associativity</a></div><div class="ttdeci">Associativity</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01147">Parser.cs:1147</a></div></div>
<div class="ttc" id="a00045_html_a301aa7c866593a5b625a8fc158bbeacea07001155edc33437d76742b7ac124529"><div class="ttname"><a href="a00045.html#a301aa7c866593a5b625a8fc158bbeacea07001155edc33437d76742b7ac124529">Yarn.ShortcutOption</a></div></div>
<div class="ttc" id="a00098_html_aceddb5496ccffe668bced2d131e4bf86"><div class="ttname"><a href="a00098.html#aceddb5496ccffe668bced2d131e4bf86">Yarn.Parser.Expression.Type</a></div><div class="ttdeci">Type</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00749">Parser.cs:749</a></div></div>
<div class="ttc" id="a00077_html_ad8c821f5f5671cdbac6e4a6fc0b9174b"><div class="ttname"><a href="a00077.html#ad8c821f5f5671cdbac6e4a6fc0b9174b">Yarn.Parser.CustomCommand.PrintTree</a></div><div class="ttdeci">override string PrintTree(int indentLevel)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00314">Parser.cs:314</a></div></div>
<div class="ttc" id="a00033_html_a896df0f23b44e9f20036150b3527d9e5"><div class="ttname"><a href="a00033.html#a896df0f23b44e9f20036150b3527d9e5">Yarn.Parser.AssignmentStatement.operation</a></div><div class="ttdeci">TokenType operation</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01110">Parser.cs:1110</a></div></div>
<div class="ttc" id="a00037_html_a943abeb93be783da7ff6ca595b6a34e7"><div class="ttname"><a href="a00037.html#a943abeb93be783da7ff6ca595b6a34e7">Yarn.Parser.Block.Block</a></div><div class="ttdeci">Block(ParseNode parent, Parser p)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00446">Parser.cs:446</a></div></div>
<div class="ttc" id="a00153_html_a2c80b137d65f31b24533987233074605"><div class="ttname"><a href="a00153.html#a2c80b137d65f31b24533987233074605">Yarn.Parser.ShortcutOption.ShortcutOption</a></div><div class="ttdeci">ShortcutOption(int optionIndex, ParseNode parent, Parser p)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00373">Parser.cs:373</a></div></div>
<div class="ttc" id="a00132_html_a3cfa07840da3a7a92c820788e902aefb"><div class="ttname"><a href="a00132.html#a3cfa07840da3a7a92c820788e902aefb">Yarn.Parser.Node.name</a></div><div class="ttdeci">string name</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00119">Parser.cs:119</a></div></div>
<div class="ttc" id="a00153_html"><div class="ttname"><a href="a00153.html">Yarn.Parser.ShortcutOption</a></div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00368">Parser.cs:368</a></div></div>
<div class="ttc" id="a00160_html_a7fa97a80f1b9313bc2bd4194e3f75759"><div class="ttname"><a href="a00160.html#a7fa97a80f1b9313bc2bd4194e3f75759">Yarn.Parser.Statement.assignmentStatement</a></div><div class="ttdeci">AssignmentStatement assignmentStatement</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00181">Parser.cs:181</a></div></div>
<div class="ttc" id="a00098_html_a686da57aaf67d50d2832f9ee0028a979"><div class="ttname"><a href="a00098.html#a686da57aaf67d50d2832f9ee0028a979">Yarn.Parser.Expression.Parse</a></div><div class="ttdeci">static Expression Parse(ParseNode parent, Parser p)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00772">Parser.cs:772</a></div></div>
<div class="ttc" id="a00044_html_a6f4765482e98ed042e38a0ede13f171f"><div class="ttname"><a href="a00044.html#a6f4765482e98ed042e38a0ede13f171f">Yarn.Parser.IfStatement.Clause.statements</a></div><div class="ttdeci">IEnumerable&lt; Statement &gt; statements</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00548">Parser.cs:548</a></div></div>
<div class="ttc" id="a00167_html_a471a25da67fda0524f2375f9a882aafa"><div class="ttname"><a href="a00167.html#a471a25da67fda0524f2375f9a882aafa">Yarn.Token.type</a></div><div class="ttdeci">TokenType type</div><div class="ttdef"><b>Definition:</b> <a href="a00298_source.html#l00177">Lexer.cs:177</a></div></div>
<div class="ttc" id="a00137_html_a83fa1b8db0e6678006920812b6f33f62a6adf97f83acf6453d4a6a4b1070f3754"><div class="ttname"><a href="a00137.html#a83fa1b8db0e6678006920812b6f33f62a6adf97f83acf6453d4a6a4b1070f3754">Yarn.Parser.Operator.None</a></div></div>
<div class="ttc" id="a00045_html_a301aa7c866593a5b625a8fc158bbeacea27118326006d3829667a400ad23d5d98"><div class="ttname"><a href="a00045.html#a301aa7c866593a5b625a8fc158bbeacea27118326006d3829667a400ad23d5d98">Yarn.String</a></div></div>
<div class="ttc" id="a00140_html_a1ffeca22df52451120cb362f90fd4e9f"><div class="ttname"><a href="a00140.html#a1ffeca22df52451120cb362f90fd4e9f">Yarn.Parser.OptionStatement.CanParse</a></div><div class="ttdeci">static bool CanParse(Parser p)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00480">Parser.cs:480</a></div></div>
<div class="ttc" id="a00098_html_a5004a8eaa00b2b55856ecb4f339033fb"><div class="ttname"><a href="a00098.html#a5004a8eaa00b2b55856ecb4f339033fb">Yarn.Parser.Expression.ShouldApplyPrecedence</a></div><div class="ttdeci">static bool ShouldApplyPrecedence(TokenType o1, Stack&lt; Token &gt; operatorStack)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01046">Parser.cs:1046</a></div></div>
<div class="ttc" id="a00098_html_ad55c92df835006328bc2a79a8f91efb9"><div class="ttname"><a href="a00098.html#ad55c92df835006328bc2a79a8f91efb9">Yarn.Parser.Expression.type</a></div><div class="ttdeci">Type type</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00754">Parser.cs:754</a></div></div>
<div class="ttc" id="a00142_html_a18c67cb16090d0889bb9d6c8c6c565f8"><div class="ttname"><a href="a00142.html#a18c67cb16090d0889bb9d6c8c6c565f8">Yarn.Parser.ParseNode.ToString</a></div><div class="ttdeci">override string ToString()</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00094">Parser.cs:94</a></div></div>
<div class="ttc" id="a00142_html_a580e520a29444fc23ac3660cbe514a09"><div class="ttname"><a href="a00142.html#a580e520a29444fc23ac3660cbe514a09">Yarn.Parser.ParseNode.NodeParent</a></div><div class="ttdeci">Node NodeParent()</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00100">Parser.cs:100</a></div></div>
<div class="ttc" id="a00033_html_af3d393da2f684272251805d3471b6c7a"><div class="ttname"><a href="a00033.html#af3d393da2f684272251805d3471b6c7a">Yarn.Parser.AssignmentStatement.validOperators</a></div><div class="ttdeci">static TokenType[] validOperators</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01112">Parser.cs:1112</a></div></div>
<div class="ttc" id="a00077_html_a1d9f9f57c44e1a0d228793b658339576aa1a6657be79cc0fc1e9b23b9e108f043"><div class="ttname"><a href="a00077.html#a1d9f9f57c44e1a0d228793b658339576aa1a6657be79cc0fc1e9b23b9e108f043">Yarn.Parser.CustomCommand.Expression</a></div></div>
<div class="ttc" id="a00143_html_acd2714b911fb5e7c38f0e07a9dc1af58"><div class="ttname"><a href="a00143.html#acd2714b911fb5e7c38f0e07a9dc1af58">Yarn.Parser.Parser</a></div><div class="ttdeci">Parser(ICollection&lt; Token &gt; tokens, Library library)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01264">Parser.cs:1264</a></div></div>
<div class="ttc" id="a00132_html_a005a6b0f614beb77708fc5ce8fea66e1"><div class="ttname"><a href="a00132.html#a005a6b0f614beb77708fc5ce8fea66e1">Yarn.Parser.Node.source</a></div><div class="ttdeci">string source</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00121">Parser.cs:121</a></div></div>
<div class="ttc" id="a00132_html_ab11501ebf251fdaa7cfe44edfa993068"><div class="ttname"><a href="a00132.html#ab11501ebf251fdaa7cfe44edfa993068">Yarn.Parser.Node.PrintTree</a></div><div class="ttdeci">override string PrintTree(int indentLevel)</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l00142">Parser.cs:142</a></div></div>
<div class="ttc" id="a00137_html_ac2de2f59be0e69b316627a4de16fadd3"><div class="ttname"><a href="a00137.html#ac2de2f59be0e69b316627a4de16fadd3">Yarn.Parser.Operator.operatorType</a></div><div class="ttdeci">TokenType operatorType</div><div class="ttdef"><b>Definition:</b> <a href="a00301_source.html#l01145">Parser.cs:1145</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_1eca966f73ceaf9660884e1398ef38ac.html">YarnSpinner</a></li><li class="navelem"><a class="el" href="a00301.html">Parser.cs</a></li>
    <li class="footer">Generated on Mon Nov 6 2017 00:59:11 for YarnSpinner by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
